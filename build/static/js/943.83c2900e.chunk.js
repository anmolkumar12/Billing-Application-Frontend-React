"use strict";(self.webpackChunkBilling_Application_Frontend=self.webpackChunkBilling_Application_Frontend||[]).push([[943],{5943:(e,l,i)=>{i.r(l),i.d(l,{default:()=>U});var t=i(5043),a=i(4652),n=i(7094);const o={"main-tab-screen":"Client_main-tab-screen__pkm8e","panel-tabs":"Client_panel-tabs__M0y1+","addition-field-header":"Client_addition-field-header__mmmPE","addition-field-buttons":"Client_addition-field-buttons__U5Xkk","aggregator-dashboard":"Client_aggregator-dashboard__dTgjn","upload-wrapper":"Client_upload-wrapper__w-cEO","upload-file-section":"Client_upload-file-section__tI5qa","upload-file":"Client_upload-file__ght2k","empty-upload":"Client_empty-upload__8UcZ3","chip-tm":"Client_chip-tm__WJS2F","cstm-chip":"Client_cstm-chip__sP7jg","p-chip":"Client_p-chip__tWoFC","p-chip-text":"Client_p-chip-text__tm1vv","available-card-box":"Client_available-card-box__bvIJt","available-card-details":"Client_available-card-details__utE-x","detail-transcation-btn":"Client_detail-transcation-btn__rDzhg","available-card-img":"Client_available-card-img__beimv","coupon-card":"Client_coupon-card__xSHgY",textWithImg:"Client_textWithImg__yGwWk",row:"Client_row__WBMuF","col-lg-3":"Client_col-lg-3__-ZDjB","available-card":"Client_available-card__THBZ3","reedemed-amount-card":"Client_reedemed-amount-card__LCuUc","credit-amount-card":"Client_credit-amount-card__CBzjn","last-recharge-card":"Client_last-recharge-card__c0oh4","wallet-row":"Client_wallet-row__PzXZO","wallet-card":"Client_wallet-card__pSxao","card-logo":"Client_card-logo__TOLY0","food-wallet-card":"Client_food-wallet-card__h4zKX","fuel-wallet-card":"Client_fuel-wallet-card__nkSeE","general-wallet-card":"Client_general-wallet-card__zyOfm","food-wallet-details":"Client_food-wallet-details__tcEV5","fuel-wallet-details":"Client_fuel-wallet-details__l2vYS","general-wallet-details":"Client_general-wallet-details__+rm22","card-logo-circle":"Client_card-logo-circle__5mRpb","wallet-details":"Client_wallet-details__+drBa","aggregator-analytics-table":"Client_aggregator-analytics-table__ZGRu0","text-success":"Client_text-success__e4n-V","text-danger":"Client_text-danger__rbr5-","no-record-div":"Client_no-record-div__BPCFk","col-lg-2":"Client_col-lg-2__lPaaj",actionMenuBtn:"Client_actionMenuBtn__98AEA",popup_ActionMenu:"Client_popup_ActionMenu__EVcP-","sm-popup-content":"Client_sm-popup-content__T5ekL","btn-main":"Client_btn-main__j+81r","add-recharge-content":"Client_add-recharge-content__4-wAm","add-recharge-form":"Client_add-recharge-form__2fnPE",formLabel:"Client_formLabel__r8LYs","p-inputtextarea":"Client_p-inputtextarea__qgtDl","form-container":"Client_form-container__30OqY","form-content":"Client_form-content__WPx7R","popup-lower-btn":"Client_popup-lower-btn__zHuMT","popup-lower-left-btn":"Client_popup-lower-left-btn__v6YJk","popup-lower":"Client_popup-lower__ktcEB","popup-lower-right-btn":"Client_popup-lower-right-btn__lQbzX","clickable-msa":"Client_clickable-msa__Mqx5z","download-icon":"Client_download-icon__Mv-+V"};var d=i(9379),s=i(4862),c=i(9559),r=i(3002),u=i(7873),v=i(7416),p=i(5727),m=i(1356),h=i(3536),f=i.n(h),y=i(8992),g=i(8945),_=i(2235),x=i(6530),N=i(5318),b=i(8368),S=i(3159),j=i(6866),A=i(2482),w=i(4635),C=i(1284),T=i(6124),D=i(6178),F=i.n(D),E=i(579);const I=()=>{var e;const l={client_name:{inputType:"inputtext",label:"Client Name",value:null,validation:{required:!0},fieldWidth:"col-md-4"},is_same_alias:{inputType:"inputSwitch",label:"Alias same as client name",value:!1,validation:{required:!1},fieldWidth:"col-md-4 mg-12-t"},vega_client_name:{inputType:"inputtext",label:"Vega Client Name (Alias)",value:null,validation:{required:!0},fieldWidth:"col-md-4"},client_type:{inputType:"singleSelect",label:"Client Type",options:["PVT","LLP","Public","Proprietorship","Others"],value:null,validation:{required:!0},fieldWidth:"col-md-4"},credit_period:{inputType:"inputNumber",label:"Credit Period (No. of Days)",value:null,validation:{required:!0},fieldWidth:"col-md-4"},client_status:{inputType:"singleSelect",label:"Client Status",options:["Existing","New"],value:null,validation:{required:!1},hideField:!0,fieldWidth:"col-md-4"},country_name:{inputType:"singleSelect",label:"Country",options:[],value:null,validation:{required:!0},fieldWidth:"col-md-4"},companyName:{inputType:"singleSelect",label:"Company",options:[],value:null,validation:{required:!0},fieldWidth:"col-md-4"},account_name:{inputType:"multiSelect",label:"Bank Name",options:[],value:[],validation:{required:!0},fieldWidth:"col-md-4"},industryHeadNames:{inputType:"singleSelect",label:"Industry Head",options:[],value:null,validation:{required:!0},fieldWidth:"col-md-4"},industry_group:{inputType:"singleSelect",label:"Industry Group",options:[],value:null,validation:{required:!1},fieldWidth:"col-md-4"},industry_name:{inputType:"singleSelect",label:"Industry Sub Group",options:[],value:null,validation:{required:!1},fieldWidth:"col-md-4 "},isApplicableAM:{inputType:"inputSwitch",label:"Is SM or AM Applicable?",value:null,validation:{required:!1},fieldWidth:"col-md-4 mg-12-t"},sales_person:{inputType:"multiSelect",label:"Sales Person",options:[],value:[],validation:{required:!1},fieldWidth:"col-md-4"},account_manager:{inputType:"multiSelect",label:"Account Manager",options:[],value:[],validation:{required:!1},fieldWidth:"col-md-4"},msa_start_date:{inputType:"singleDatePicker",label:"MSA Start Date",value:null,validation:{required:!1},fieldWidth:"col-md-4"},msa_end_date:{inputType:"singleDatePicker",label:"MSA End Date",value:null,validation:{required:!1},fieldWidth:"col-md-4"},is_msa_missing:{inputType:"inputSwitch",label:"Is MSA",value:!1,validation:{required:!1},fieldWidth:"col-md-4 mg-12-t"},nda_flag:{inputType:"inputSwitch",label:"Is NDA",value:!1,validation:{required:!1},fieldWidth:"col-md-4 mg-12-t"},non_solicitation_clause:{inputType:"inputSwitch",label:"Non Solicitation Clause",value:!1,validation:{required:!1},fieldWidth:"col-md-4 mg-12-t"},use_logo_permission:{inputType:"inputSwitch",label:"Use Logo Permission",value:!1,validation:{required:!1},fieldWidth:"col-md-4 mg-12-t"}},i={start_date:{inputType:"singleDatePicker",label:"Start Date",value:null,validation:{required:!0},fieldWidth:"col-md-6"},end_date:{inputType:"singleDatePicker",label:"End Date",value:null,validation:{required:!0},fieldWidth:"col-md-6"}},[a,h]=(0,t.useState)([]),[D,I]=(0,t.useState)([]),[M,W]=(0,t.useState)(!1),[R,k]=(0,t.useState)(!1),[q,O]=(0,t.useState)(!1),[P,U]=(0,t.useState)(!0),[B,V]=(0,t.useState)(!1),[H,Y]=(0,t.useState)([]),[z,G]=(0,t.useState)(),[L,J]=(0,t.useState)([]),[Q,Z]=(0,t.useState)([]),[K,X]=(0,t.useState)([]),[$,ee]=(0,t.useState)([]),[le,ie]=(0,t.useState)([]),[te,ae]=(0,t.useState)(""),[ne,oe]=(0,t.useState)(""),[de,se]=(0,t.useState)(!1),[ce,re]=(0,t.useState)(!1),[ue,ve]=(0,t.useState)([]),[pe,me]=(0,t.useState)([]),[he,fe]=(0,t.useState)([]),[ye,ge]=(0,t.useState)([]),[_e,xe]=(0,t.useState)([]),[Ne,be]=(0,t.useState)(!1),[Se,je]=(0,t.useState)(l),[Ae,we]=(0,t.useState)(f().cloneDeep(Se)),[Ce,Te]=(0,t.useState)(i),[De,Fe]=(0,t.useState)(f().cloneDeep(Ce)),Ee=new N.F,Ie=new S.d,Me=new w.R,We=new C._,Re=(new p.A).get("userInfo"),ke=null===Re||void 0===Re?void 0:Re.userId;let qe;const Oe=new v.m,Pe=(new x.r,new b.W),Ue=new T.U,Be=[{label:"Action",fieldName:"action",textAlign:"left",frozen:!0,sort:!1,filter:!1,body:e=>(0,E.jsxs)("div",{style:{display:"flex",gap:"12px",marginLeft:"20px"},children:[(0,E.jsx)("span",{className:"pi pi-pencil",style:{cursor:"pointer"},title:"Update",onClick:()=>dl(e)}),(0,E.jsx)("span",{className:"pi pi-".concat(e.isActive?"ban":"check-circle"),style:{cursor:"pointer"},title:e.isActive?"Deactivate":"Activate",onClick:()=>ul(e)}),(0,E.jsx)("span",{className:"pi pi-sync",style:{cursor:"pointer"},title:"Update MSA",onClick:()=>sl(e)})]})},{label:"Client Name",fieldName:"client_name",textAlign:"left",sort:!0,filter:!0,placeholder:"Client Name",body:e=>(0,E.jsx)(He,{id:"clientNameTooltip-".concat(e.id),content:e.client_name})},{label:"Vega Client Name",fieldName:"vega_client_name",textAlign:"left",sort:!0,filter:!0,placeholder:"Vega Client Name",body:e=>(0,E.jsx)(He,{id:"vegaClientNameTooltip-".concat(e.id),content:e.vega_client_name})},{label:"Client Type",fieldName:"client_type",textAlign:"left",sort:!0,filter:!0,placeholder:"Client Type",body:e=>(0,E.jsx)(He,{id:"clientTypeTooltip-".concat(e.id),content:e.client_type})},{label:"Credit Period (No. of Days)",fieldName:"credit_period",textAlign:"left",sort:!0,filter:!0,placeholder:"Credit Period",body:e=>(0,E.jsx)(He,{id:"creditPeriodTooltip-".concat(e.id),content:e.credit_period})},{label:"Client Status",fieldName:"client_status",textAlign:"left",sort:!0,filter:!0,placeholder:"Client Status",body:e=>(0,E.jsx)(He,{id:"clientStatusTooltip-".concat(e.id),content:e.client_status})},{label:"Country",fieldName:"countryName",textAlign:"left",sort:!0,filter:!0,placeholder:"Country",body:e=>(0,E.jsx)(He,{id:"countryTooltip-".concat(e.id),content:e.countryName})},{label:"Company Name",fieldName:"companyName",textAlign:"left",sort:!0,filter:!0,placeholder:"Company Name",body:e=>(0,E.jsx)(He,{id:"companyNameTooltip-".concat(e.id),content:e.companyName})},{label:"Industry Head Name",fieldName:"industryHeadName",textAlign:"left",sort:!0,filter:!0,placeholder:"Industry Head Name",body:e=>(0,E.jsx)(He,{id:"industryHeadTooltip-".concat(e.id),content:e.industryHeadName})},{label:"Industry Sub Group",fieldName:"industryGroupNames",textAlign:"left",sort:!0,filter:!0,placeholder:"Industry Group Names",body:e=>(0,E.jsx)(He,{id:"industryGroupTooltip-".concat(e.id),content:e.industryGroupNames})},{label:"Industry Group",fieldName:"industryName",textAlign:"left",sort:!0,filter:!0,placeholder:"Industry Name",body:e=>(0,E.jsx)(He,{id:"industryNameTooltip-".concat(e.id),content:e.industryName})},{label:"Account Manager Names",fieldName:"accountManagerNames",textAlign:"left",sort:!0,filter:!0,placeholder:"Account Manager Names",body:e=>(0,E.jsx)(He,{id:"accountManagerTooltip-".concat(e.id),content:e.accountManagerNames})},{label:"MSA Start Date",fieldName:"msa_start_date",textAlign:"left",sort:!0,filter:!0,placeholder:"MSA Start Date",body:e=>(0,E.jsx)("span",{children:e.msa_start_date})},{label:"MSA End Date",fieldName:"msa_end_date",textAlign:"left",sort:!0,filter:!0,placeholder:"MSA End Date",body:e=>(0,E.jsx)("span",{children:e.msa_end_date})},{label:"MSA available?",fieldName:"msa_flag",textAlign:"left",frozen:!1,sort:!0,filter:!0,body:e=>(0,E.jsx)("div",{children:(0,E.jsx)("span",{children:null===e||void 0===e?void 0:e.msa_flag})})},{label:"MSA File",fieldName:"msaFilePath",textAlign:"left",sort:!1,filter:!1,placeholder:"MSA File",body:e=>(0,E.jsx)(E.Fragment,{children:null!==e&&void 0!==e&&e.msaFilePath?(0,E.jsxs)("div",{onClick:()=>Ve(e.msaFilePath),children:[(0,E.jsx)("span",{style:{cursor:"pointer",color:"#007bff"},children:"MSA"}),(0,E.jsx)("span",{className:"pi pi-download",style:{cursor:"pointer",marginLeft:"8px",fontSize:"10px",color:"#007bff"},title:"Download MSA"})]}):null})},{label:"NDA available?",fieldName:"nda_flag",textAlign:"left",frozen:!1,sort:!0,filter:!0,body:e=>(0,E.jsx)("div",{children:(0,E.jsx)("span",{children:null===e||void 0===e?void 0:e.nda_flag})})},{label:"NDA File",fieldName:"ndaFilePath",textAlign:"left",sort:!1,filter:!1,placeholder:"NDA File",body:e=>(0,E.jsx)(E.Fragment,{children:null!==e&&void 0!==e&&e.ndaFilePath?(0,E.jsxs)("div",{onClick:()=>Ve(e.ndaFilePath),children:[(0,E.jsx)("span",{style:{cursor:"pointer",color:"#007bff"},children:"NDA"}),(0,E.jsx)("span",{className:"pi pi-download",style:{cursor:"pointer",marginLeft:"8px",fontSize:"10px",color:"#007bff"},title:"Download MSA"})]}):null})},{label:"Status",fieldName:"isActive",textAlign:"left",frozen:!1,sort:!0,filter:!0,body:e=>(0,E.jsx)("div",{children:(0,E.jsx)("span",{style:{color:1==(null===e||void 0===e?void 0:e.isActive)?"green":"red"},children:1==(null===e||void 0===e?void 0:e.isActive)?"Active":"Inactive"})})},{label:"Updated At",fieldName:"updated_at",textAlign:"left",sort:!0,filter:!0,placeholder:"Updated At",body:e=>(0,E.jsx)("span",{children:e.updated_at})}],Ve=e=>{const l="".concat("https://ims.polestarllp.com/webapi","/").concat(e),i=document.createElement("a");i.href=l,i.download=e.split("/").pop(),document.body.appendChild(i),i.click(),document.body.removeChild(i)},He=e=>{let{id:l,content:i}=e;return(0,E.jsxs)("div",{children:[(0,E.jsx)("span",{id:l,children:i}),(0,E.jsx)(m.m,{target:"#".concat(l),position:"top"})]})};(0,t.useEffect)((()=>{var e,l;console.log("start date changed",null===Ae||void 0===Ae||null===(e=Ae.msa_start_date)||void 0===e?void 0:e.value,null===Ae||void 0===Ae||null===(l=Ae.msa_end_date)||void 0===l?void 0:l.value),we((e=>{var l;return(0,d.A)((0,d.A)({},e),{},{msa_end_date:(0,d.A)((0,d.A)({},e.msa_end_date),{},{min:(null===(l=e.msa_start_date)||void 0===l?void 0:l.value)||null})})}))}),[null===Ae||void 0===Ae||null===(e=Ae.msa_start_date)||void 0===e?void 0:e.value]),(0,t.useEffect)((()=>{0==R&&0==B&&0==Ne&&(async()=>{await Ye();const e=await Je();await $e(e);const l=await Qe();await el(l);const i=await Le();await ll(i);const t=await Ze();await il(t);const a=await Ge();await nl(a),await tl(a)})()}),[R,B,Ne]);const Ye=async()=>{W(!0);try{var e;const l=await Ie.getClientMaster();return console.log("this is client datat ",null===l||void 0===l?void 0:l.clients),null===l||void 0===l||null===(e=l.clients)||void 0===e||e.forEach((e=>{e.msa_start_date=e.msa_start_date&&F()(e.msa_start_date).isValid()?F()(e.msa_start_date).format("DD-MM-YYYY"):null,e.msa_end_date=e.msa_end_date&&F()(e.msa_end_date).isValid()?F()(e.msa_end_date).format("DD-MM-YYYY"):1==e.msa_flag?"Not Applicable":null,e.updated_at=e.updated_at&&F()(e.updated_at).isValid()?F()(e.updated_at).format("DD-MM-YYYY HH:mm:ss"):null,e.client_status="1"==(null===e||void 0===e?void 0:e.client_status)?"New":"Existing",e.msa_flag=1==(null===e||void 0===e?void 0:e.msa_flag)?"Yes":"No",e.nda_flag=1==(null===e||void 0===e?void 0:e.nda_flag)?"Yes":"No"})),console.log("this is client datat after",null===l||void 0===l?void 0:l.clients),ge(null===l||void 0===l?void 0:l.clients),null===l||void 0===l?void 0:l.clients}catch(l){console.error(l)}finally{W(!1)}},ze=async()=>{try{var e;const l=await Ue.getSalesMaster(),i=null===l||void 0===l||null===(e=l.salesManagers)||void 0===e?void 0:e.filter((e=>(null===e||void 0===e?void 0:e.isactive)||(null===e||void 0===e?void 0:e.isActive)));return xe(i),i}catch(l){console.error(l)}},Ge=async()=>{W(!0);try{var e;const l=await Pe.getIndustryMaster(),i=null===l||void 0===l||null===(e=l.industryMasters)||void 0===e?void 0:e.filter((e=>(null===e||void 0===e?void 0:e.isactive)||(null===e||void 0===e?void 0:e.isActive)));return X(i),i}catch(l){console.error(l)}finally{W(!1)}},Le=async()=>{W(!0);try{var e;const l=await Pe.getIndustryHeadMaster(),i=null===l||void 0===l||null===(e=l.industryHeads)||void 0===e?void 0:e.filter((e=>(null===e||void 0===e?void 0:e.isactive)||(null===e||void 0===e?void 0:e.isActive)));return Z(i),i}catch(l){console.error(l)}finally{W(!1)}},Je=async()=>{W(!0);try{var e;const l=await Oe.getCountryMaster(),i=null===l||void 0===l||null===(e=l.countries)||void 0===e?void 0:e.filter((e=>(null===e||void 0===e?void 0:e.isactive)||(null===e||void 0===e?void 0:e.isActive)));return h(i),i}catch(l){console.error(l)}finally{W(!1)}},Qe=async()=>{W(!0);try{var e;const l=await Ee.getCompanyMaster(),i=null===l||void 0===l||null===(e=l.companies)||void 0===e?void 0:e.filter((e=>(null===e||void 0===e?void 0:e.isactive)||(null===e||void 0===e?void 0:e.isActive)));return J(i),i}catch(l){console.error(l)}finally{W(!1)}},Ze=async()=>{W(!0);try{var e;const l=await Pe.getIndustryGroupMaster(),i=null===l||void 0===l||null===(e=l.groupIndustries)||void 0===e?void 0:e.filter((e=>(null===e||void 0===e?void 0:e.isactive)||(null===e||void 0===e?void 0:e.isActive)));return ve(i),i}catch(l){console.error(l)}finally{W(!1)}},Ke=async()=>{try{var e;const l=await Me.getAccountMaster(),i=null===l||void 0===l||null===(e=l.accountManagers)||void 0===e?void 0:e.filter((e=>(null===e||void 0===e?void 0:e.isactive)||(null===e||void 0===e?void 0:e.isActive)));return me(i),i}catch(l){console.error(l)}},Xe=async()=>{try{var e;const l=await We.getAccountsMaster(),i=null===l||void 0===l||null===(e=l.companyAccounts)||void 0===e?void 0:e.filter((e=>(null===e||void 0===e?void 0:e.isactive)||(null===e||void 0===e?void 0:e.isActive)));return fe(i),i}catch(l){console.error(l)}},$e=async function(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:a).map((e=>null===e||void 0===e?void 0:e.name));Se.country_name.options=e,await je(Se),await ol(Se)},el=async function(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:L).map((e=>null===e||void 0===e?void 0:e.companyName));Se.companyName.options=e,await je(Se),await gl(Se)},ll=async function(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q).map((e=>null===e||void 0===e?void 0:e.industryHeadName));Se.industryHeadNames.options=e,await je(Se),await gl(Se)},il=async function(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:ue).map((e=>null===e||void 0===e?void 0:e.groupIndustryName));Se.industry_group.options=e,await je(Se),await gl(Se)},tl=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ue;console.log("industryGroupMaster",e);e.map((e=>null===e||void 0===e?void 0:e.subIndustryCategory));await je(Se),await gl(Se)},al=async function(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:he).map((e=>null===e||void 0===e?void 0:e.bankName));Se.account_name.options=e,await je(Se)},nl=async function(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:K).map((e=>null===e||void 0===e?void 0:e.industryName));Se.industry_name.options=e,await je(Se),await gl(Se)},ol=async e=>{we(e)},dl=async e=>{const l=await Ke();await async function(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:pe).map((e=>null===e||void 0===e?void 0:e.name));Se.account_manager.options=e,await je(Se)}(l);const i=await Xe();await al(i);const t=await ze();await async function(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:_e).map((e=>null===e||void 0===e?void 0:e.name));Se.sales_person.options=e,await je(Se)}(t),await al(i),await G(e),await rl(e),await k(!0),await O(!0)},sl=e=>{be(!0),G(e)},cl=e=>{V(!1)},rl=e=>{try{var l,i,t;Se.client_name.value=null===e||void 0===e?void 0:e.client_name,Se.vega_client_name.value=null===e||void 0===e?void 0:e.vega_client_name,Se.client_type.value=null===e||void 0===e?void 0:e.client_type,Se.credit_period.value=null===e||void 0===e?void 0:e.credit_period,Se.client_status.value=null===e||void 0===e?void 0:e.client_status,Se.country_name.value=null===e||void 0===e?void 0:e.countryName,Se.companyName.value=null===e||void 0===e?void 0:e.companyName,Se.account_name.value=null===e||void 0===e||null===(l=e.bankName)||void 0===l?void 0:l.split(","),Se.industryHeadNames.value=null===e||void 0===e?void 0:e.industryHeadName,Se.industry_name.value=null===e||void 0===e?void 0:e.currentIndustryGroupNames,Se.industry_group.value=null===e||void 0===e?void 0:e.currentIndustryName,Se.isApplicableAM.value="true"==(null===e||void 0===e?void 0:e.isApplicableAM),Se.sales_person.value=null!==e&&void 0!==e&&e.salesMangerName?null===e||void 0===e||null===(i=e.salesMangerName)||void 0===i?void 0:i.split(","):[],Se.account_manager.value=null!==e&&void 0!==e&&e.accountManagerNames?null===e||void 0===e||null===(t=e.accountManagerNames)||void 0===t?void 0:t.split(","):[],Se.msa_start_date.value=ml(null===e||void 0===e?void 0:e.msa_start_date),Se.msa_end_date.value=ml(null===e||void 0===e?void 0:e.msa_end_date),Se.is_msa_missing.value=!(null===e||void 0===e||!e.msa_flag),Se.nda_flag.value=!(null===e||void 0===e||!e.nda_flag),Se.non_solicitation_clause.value=!(null===e||void 0===e||!e.non_solicitation_clause_flag),Se.use_logo_permission.value=!(null===e||void 0===e||!e.use_logo_permission_flag),console.log("dataaaaaaaaaa----\x3e>>",Se,e),null!==e&&void 0!==e&&e.msa_flag&&ae(null===e||void 0===e?void 0:e.msaFilePath),null!==e&&void 0!==e&&e.nda_flag&&oe(null===e||void 0===e?void 0:e.ndaFilePath),we(f().cloneDeep(Se))}catch(a){console.log("error",a)}},ul=e=>{qe=e,Y({displayToggle:!1,title:"Delete",message:"Are you sure you want to ".concat(null!==e&&void 0!==e&&e.isactive||null!==e&&void 0!==e&&e.is_active||null!==e&&void 0!==e&&e.isActive?"deactivate":"activate"," this record?"),acceptFunction:vl,rejectFunction:cl,askForDeactivationDate:(null===e||void 0===e?void 0:e.isactive)||(null===e||void 0===e?void 0:e.is_active)||(null===e||void 0===e?void 0:e.isActive)}),V(!0)},vl=e=>{W(!0),console.log("deactivationDate",e),Ie.deactivateClientMaster((0,d.A)((0,d.A)({},qe),{},{loggedInUserId:ke,deactivationDate:e?hl(e):null})).then((()=>{var e;W(!1),V(!1),y.W.show("Client record ".concat(null!==(e=qe)&&void 0!==e&&e.isActive?"deactivated":"activated"," successfully"),g.a.SUCCESS)})).catch((e=>(W(!1),!1)))},pl=()=>{k(!1),O(!1),G({}),je(f().cloneDeep(l)),we(f().cloneDeep(l)),be(!1),Fe(f().cloneDeep(i)),ee([]),ie([]),oe(""),ae("")},ml=e=>{if(!e)return new Date;const l=new Date(e);if(isNaN(l))return new Date;const i=l.getFullYear(),t=String(l.getMonth()+1).padStart(2,"0"),a=String(l.getDate()).padStart(2,"0");return new Date(i,t-1,a)},hl=e=>{if(!e)return null;const l=new Date(e),i=l.getFullYear(),t=String(l.getMonth()+1).padStart(2,"0"),a=String(l.getDate()).padStart(2,"0");return"".concat(i,"/").concat(t,"/").concat(a)},fl=e=>{ee([]),e&&e[0]&&f().each(e,(e=>{if(e.name.split(".")[e.name.split(".").length-1].toLowerCase()===j.$.PDF){if(e.size>10485760)return y.W.show("file size is too large, allowed maximum size is 10 MB.","error");{ee((l=>[...l,e]));const l=URL.createObjectURL(e);ae(l)}}else y.W.show("Invalid file format you can only attach the PDF here!","error"),e=null}))},yl=()=>{ee([]),ae("")},gl=async e=>{var l,i,t,a,n,o,d;const s=f().cloneDeep(e);var c;(s.client_status.hideField=!q,1==s.nda_flag.value?se(!0):0==s.nda_flag.value&&se(!1),console.log("hhhhh",s),1==(null===s||void 0===s||null===(l=s.is_same_alias)||void 0===l?void 0:l.value))&&(s.vega_client_name.value=null===s||void 0===s||null===(c=s.client_name)||void 0===c?void 0:c.value);if(1==(null===s||void 0===s||null===(i=s.is_msa_missing)||void 0===i?void 0:i.value)?(re(!0),s.msa_start_date.validation&&(s.msa_start_date.validation.required=!0),s.msa_end_date.validation&&(s.msa_end_date.validation.required=!1),s.msa_start_date.disable=!1,s.msa_end_date.disable=!1):(re(!1),s.msa_start_date.validation&&(s.msa_start_date.validation.required=!1),s.msa_end_date.validation&&(s.msa_end_date.validation.required=!1),s.msa_start_date.disable=!0,s.msa_end_date.disable=!0),console.log("form handler checking ----\x3e>> ",s,Ae),null!==s&&void 0!==s&&null!==(t=s.isApplicableAM)&&void 0!==t&&t.value?(s.sales_person.disable=!1,s.account_manager.disable=!1):(s.sales_person.value=null,s.account_manager.value=null,s.sales_person.disable=!0,s.account_manager.disable=!0),(null===(a=s.companyName)||void 0===a?void 0:a.value)!==(null===Ae||void 0===Ae||null===(n=Ae.companyName)||void 0===n?void 0:n.value)){var r;const e=null===(r=s.companyName)||void 0===r?void 0:r.value;if(e){const l=await Xe();if(l){var u,v;const i=null===l||void 0===l?void 0:l.filter((l=>(null===l||void 0===l?void 0:l.companyName)==e)).map((e=>null===e||void 0===e?void 0:e.bankName));s.account_name.options=i||[];const t=[null===l||void 0===l||null===(u=l.filter((l=>(null===l||void 0===l?void 0:l.companyName)==e)))||void 0===u||null===(v=u.find((e=>null===e||void 0===e?void 0:e.isDefaultAccount)))||void 0===v?void 0:v.bankName];s.account_name.value=t.includes(void 0)?[]:t,console.log("form handler checking ----\x3e>> ",t)}}}if((null===(o=s.industryHeadNames)||void 0===o?void 0:o.value)!==(null===Ae||void 0===Ae||null===(d=Ae.industryHeadNames)||void 0===d?void 0:d.value)){var p;const e=null===(p=s.industryHeadNames)||void 0===p?void 0:p.value;if(e){const l=await Ke(),i=await ze();if(l){const i=null===l||void 0===l?void 0:l.filter((l=>(null===l||void 0===l?void 0:l.industryHeadNames)==e)).map((e=>null===e||void 0===e?void 0:e.name));s.account_manager.options=i||[]}if(i){const l=null===i||void 0===i?void 0:i.filter((l=>(null===l||void 0===l?void 0:l.industryHeadNames)==e)).map((e=>null===e||void 0===e?void 0:e.name));s.sales_person.options=l||[]}if(ue){var m;const l=null===Q||void 0===Q||null===(m=Q.find((l=>(null===l||void 0===l?void 0:l.industryHeadName)===e)))||void 0===m?void 0:m.industryNames,i=null===l||void 0===l?void 0:l.split(",").map((e=>e.trim())),t=null===ue||void 0===ue?void 0:ue.filter((e=>null===i||void 0===i?void 0:i.some((l=>null===e||void 0===e?void 0:e.groupIndustryName.includes(l))))).map((e=>null===e||void 0===e?void 0:e.groupIndustryName));s.industry_group.options=t||[],console.log("Filtered tempData:",t,"Selected Industries:",i)}}}we(s)};return M?(0,E.jsx)(n.a,{}):(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)("div",{style:{display:"flex",justifyContent:"end",marginBottom:"0.5em"},children:(0,E.jsx)(s.Q,{label:"Add New Client",icon:"pi pi-check",iconPos:"right",submitEvent:async()=>{k(!0)}})}),(0,E.jsxs)("p",{className:"m-0",children:[(0,E.jsx)(c.A,{data:ye,column:Be,showGridlines:!0,resizableColumns:!0,rows:20,paginator:!0,sortable:!0,headerRequired:!0,scrollHeight:"calc(100vh - 200px)",downloadedfileName:"Client"}),B?(0,E.jsx)(r.A,{actionPopupToggle:H,onCloseFunction:cl}):null]}),R?(0,E.jsx)("div",{className:"popup-overlay md-popup-overlay",children:(0,E.jsxs)("div",{className:"popup-body md-popup-body stretchLeft",children:[(0,E.jsxs)("div",{className:"popup-header ",children:[(0,E.jsxs)("div",{className:"popup-close",onClick:()=>{pl()},children:[(0,E.jsx)("i",{className:"pi pi-angle-left"}),(0,E.jsxs)("h4",{className:"popup-heading",children:[q?"Update":"Add New"," Client"]})]}),(0,E.jsx)("div",{className:"popup-right-close",onClick:()=>{pl()},children:"\xd7"})]}),(0,E.jsxs)("div",{className:"popup-content",style:{padding:"1rem 2rem"},children:[(0,E.jsx)(u.A,{form:f().cloneDeep(Ae),formUpdateEvent:gl,isFormValidFlag:P}),de||ce?(0,E.jsxs)("div",{className:"row",children:[ce?(0,E.jsx)("div",{className:"col-md-6",children:(0,E.jsx)("div",{className:o["upload-wrapper"],children:(0,E.jsxs)("div",{className:"row pd-10",children:[(0,E.jsx)("div",{className:"col-md-12 ".concat(o["addition-field-header"]),children:(0,E.jsx)("h5",{className:"popup-heading",children:"MSA Attachment"})}),(0,E.jsx)("div",{className:"col-md-12",children:(0,E.jsx)("div",{className:o["upload-file-section"],children:(0,E.jsx)("div",{className:o["upload-file"],children:te?(0,E.jsxs)("div",{className:o["image-preview"],children:[(0,E.jsxs)("div",{className:"icon-ui677",children:[" ",(0,E.jsx)("i",{className:"pi pi-times-circle",onClick:yl,style:{color:"red",fontSize:"1rem"}})]}),(0,E.jsx)("img",{src:A.Z.PdfIcon,style:{width:"200px",height:"130px"},alt:"Preview"})]}):(0,E.jsxs)("div",{className:o["empty-upload"],children:[(0,E.jsx)("input",{type:"file",onClick:e=>{e.target.value=null},onChange:e=>fl(e.target.files),className:o.upload,style:{width:"unset"}}),(0,E.jsx)("img",{src:A.Z.FolderIconImage,alt:"Folder Icon"}),(0,E.jsxs)("p",{children:["Drag files here ",(0,E.jsx)("span",{children:" or browse"})," ",(0,E.jsx)("br",{}),(0,E.jsx)("u",{children:"Support PDF"})]})]})})})})]})})}):null,de?(0,E.jsx)("div",{className:"col-md-6",children:(0,E.jsx)("div",{className:o["upload-wrapper"],children:(0,E.jsxs)("div",{className:"row pd-10",children:[(0,E.jsx)("div",{className:"col-md-12 ".concat(o["addition-field-header"]),children:(0,E.jsx)("h5",{className:"popup-heading",children:"NDA Attachment"})}),(0,E.jsx)("div",{className:"col-md-12",children:(0,E.jsx)("div",{className:o["upload-file-section"],children:(0,E.jsx)("div",{className:o["upload-file"],children:ne?(0,E.jsxs)("div",{className:o["image-preview"],children:[(0,E.jsxs)("div",{className:"icon-ui677",children:[" ",(0,E.jsx)("i",{className:"pi pi-times-circle",onClick:()=>{ie([]),oe("")},style:{color:"red",fontSize:"1rem"}})]}),(0,E.jsx)("img",{src:A.Z.PdfIcon,style:{width:"200px",height:"130px"},alt:"Preview"})]}):(0,E.jsxs)("div",{className:o["empty-upload"],children:[(0,E.jsx)("input",{type:"file",onClick:e=>{e.target.value=null},onChange:e=>{return l=e.target.files,ie([]),void(l&&l[0]&&f().each(l,(e=>{if(e.name.split(".")[e.name.split(".").length-1].toLowerCase()===j.$.PDF){if(e.size>10485760)return y.W.show("file size is too large, allowed maximum size is 10 MB.","error");{ie((l=>[...l,e]));const l=URL.createObjectURL(e);oe(l)}}else y.W.show("Invalid file format you can only attach the PDF here!","error"),e=null})));var l},className:o.upload,style:{width:"unset"}}),(0,E.jsx)("img",{src:A.Z.FolderIconImage,alt:"Folder Icon"}),(0,E.jsxs)("p",{children:["Drag files here ",(0,E.jsx)("span",{children:" or browse"})," ",(0,E.jsx)("br",{}),(0,E.jsx)("u",{children:"Support PDF"})]})]})})})})]})})}):null]}):null]}),(0,E.jsx)("div",{className:"popup-lower-btn",children:(0,E.jsx)(s.Q,{label:"Submit",icon:"pi pi-check",iconPos:"right",submitEvent:async e=>{var l,i,t,n,o,s,c,r,u;e.preventDefault();let v=!0;if(f().each(Ae,(e=>{var l;null!==e&&void 0!==e&&null!==(l=e.validation)&&void 0!==l&&l.required&&(v=v&&e.value)})),U(v),console.log("clientForm",Ae,null===Ae||void 0===Ae||null===(l=Ae.account_manager)||void 0===l||null===(i=l.value)||void 0===i?void 0:i.length,null===Ae||void 0===Ae||null===(t=Ae.sales_person)||void 0===t||null===(n=t.value)||void 0===n?void 0:n.length),null===Ae||void 0===Ae||null===(o=Ae.isApplicableAM)||void 0===o||!o.value||null!==Ae&&void 0!==Ae&&null!==(s=Ae.account_manager)&&void 0!==s&&null!==(c=s.value)&&void 0!==c&&c.length||null!==Ae&&void 0!==Ae&&null!==(r=Ae.sales_person)&&void 0!==r&&null!==(u=r.value)&&void 0!==u&&u.length)if(v){var p,m,h,x,N,b,S,j,A,w,C,T,D,F,E,I,M,W,R,k,O,P,B,V,H,Y,J,Z,X,ee;const e=null!==(p=null===(m=K.find((e=>e.industryName===Ae.industry_name.value)))||void 0===m?void 0:m.id)&&void 0!==p?p:null;console.log("createClientForm : ",a,Ae);const l=null!==(h=null===(x=a.find((e=>e.name===Ae.country_name.value)))||void 0===x?void 0:x.id)&&void 0!==h?h:null;let i=null!==(N=null===(b=L.find((e=>e.companyName===Ae.companyName.value)))||void 0===b?void 0:b.id)&&void 0!==N?N:null,t=null===Ae||void 0===Ae||null===(S=Ae.account_name)||void 0===S||null===(j=S.value)||void 0===j?void 0:j.map((e=>{var l;return null===he||void 0===he||null===(l=he.find((l=>(null===l||void 0===l?void 0:l.bankName)===e)))||void 0===l?void 0:l.id})).filter((e=>void 0!==e&&null!==e)).join(",");const n=null!==(A=null===(w=Q.find((e=>e.industryHeadName===Ae.industryHeadNames.value)))||void 0===w?void 0:w.id)&&void 0!==A?A:null;console.log("dddddddddddd",ue,Ae);const o=null!==(C=null===(T=ue.find((e=>e.groupIndustryName===Ae.industry_group.value)))||void 0===T?void 0:T.id)&&void 0!==C?C:null;let s="";null===Ae||void 0===Ae||null===(D=Ae.account_manager)||void 0===D||null===(F=D.value)||void 0===F||F.forEach((e=>{var l,i;const t=null!==(l=null===pe||void 0===pe||null===(i=pe.find((l=>(null===l||void 0===l?void 0:l.name)==e)))||void 0===i?void 0:i.id)&&void 0!==l?l:null;null!=t&&(s=""!=s?s+","+t:t)}));let c="";null===Ae||void 0===Ae||null===(E=Ae.sales_person)||void 0===E||null===(I=E.value)||void 0===I||I.forEach((e=>{var l,i;const t=null!==(l=null===_e||void 0===_e||null===(i=_e.find((l=>(null===l||void 0===l?void 0:l.name)==e)))||void 0===i?void 0:i.id)&&void 0!==l?l:null;null!=t&&(c=""!=c?c+","+t:t)}));const r=new FormData,u={client_name:null===Ae||void 0===Ae||null===(M=Ae.client_name)||void 0===M?void 0:M.value,vega_client_name:null===Ae||void 0===Ae||null===(W=Ae.vega_client_name)||void 0===W?void 0:W.value,client_type:null===Ae||void 0===Ae||null===(R=Ae.client_type)||void 0===R?void 0:R.value,credit_period:null===Ae||void 0===Ae||null===(k=Ae.credit_period)||void 0===k?void 0:k.value,client_status:q&&"Existing"==(null===Ae||void 0===Ae||null===(O=Ae.client_status)||void 0===O?void 0:O.value)?0:1,countryId:l,companyId:i,accountId:t,industryId:e||null,IndustryHeadId:n,IndustryGroupId:o,isApplicableAM:null===Ae||void 0===Ae||null===(P=Ae.isApplicableAM)||void 0===P?void 0:P.value,salesMangerId:c,accountManagerId:s,msa_start_date:hl(null===Ae||void 0===Ae||null===(B=Ae.msa_start_date)||void 0===B?void 0:B.value),msa_end_date:hl(null===Ae||void 0===Ae||null===(V=Ae.msa_end_date)||void 0===V?void 0:V.value),msa_flag:null!==Ae&&void 0!==Ae&&null!==(H=Ae.is_msa_missing)&&void 0!==H&&H.value?1:0,nda_flag:null!==Ae&&void 0!==Ae&&null!==(Y=Ae.nda_flag)&&void 0!==Y&&Y.value?1:0,non_solicitation_clause_flag:null!==Ae&&void 0!==Ae&&null!==(J=Ae.non_solicitation_clause)&&void 0!==J&&J.value?1:0,use_logo_permission_flag:null!==Ae&&void 0!==Ae&&null!==(Z=Ae.use_logo_permission)&&void 0!==Z&&Z.value?1:0,updated_by:ke,isActive:1};if(Object.entries(u).forEach((e=>{let[l,i]=e;r.set(l,i)})),!(null===Ae||void 0===Ae||null===(X=Ae.is_msa_missing)||void 0===X||!X.value||$&&$.length))return void y.W.show("MSA file is required!",g.a.ERROR);if(null!==$&&void 0!==$&&$.length&&r.set("msaFile",$[0]),!(null===Ae||void 0===Ae||null===(ee=Ae.nda_flag)||void 0===ee||!ee.value||le&&le.length))return void y.W.show("NDA file is required!",g.a.ERROR);if(null!==le&&void 0!==le&&le.length&&r.set("ndaFile",le[0]),console.log("here formData",r),console.log("createClientForm : ",Ae,u),null!==z&&void 0!==z&&z.id){const e=new FormData,l=(0,d.A)((0,d.A)({},u),{},{clientId:null===z||void 0===z?void 0:z.id});Object.entries(l).forEach((l=>{let[i,t]=l;e.set(i,t)})),null!==$&&void 0!==$&&$.length&&e.set("msaFile",$[0]),null!==le&&void 0!==le&&le.length&&e.set("ndaFile",le[0]),Ie.updateClientMaster(e).then((e=>{(null===e||void 0===e?void 0:e.statusCode)===_.B.SUCCESS&&(G({}),pl(),y.W.show(null===e||void 0===e?void 0:e.message,g.a.SUCCESS))})).catch((e=>{G({}),y.W.show(e,g.a.ERROR)}))}else Ie.createClientMaster(r).then((e=>{(null===e||void 0===e?void 0:e.statusCode)===_.B.CREATED&&(G({}),pl(),y.W.show(null===e||void 0===e?void 0:e.message,g.a.SUCCESS))})).catch((e=>{G({}),y.W.show(e,g.a.ERROR)}))}else y.W.show("Please Check all the Fields!",g.a.ERROR);else y.W.show("Account Manager or Sales Mnager is mandatory","error")}})})]})}):null,Ne?(0,E.jsx)("div",{className:"popup-overlay md-popup-overlay",children:(0,E.jsxs)("div",{className:"popup-body md-popup-body stretchLeft",children:[(0,E.jsxs)("div",{className:"popup-header ",children:[(0,E.jsxs)("div",{className:"popup-close",onClick:()=>{pl()},children:[(0,E.jsx)("i",{className:"pi pi-angle-left"}),(0,E.jsx)("h4",{className:"popup-heading",children:"Update MSA"})]}),(0,E.jsx)("div",{className:"popup-right-close",onClick:()=>{pl()},children:"\xd7"})]}),(0,E.jsxs)("div",{className:"popup-content",style:{padding:"1rem 2rem"},children:[(0,E.jsx)(u.A,{form:f().cloneDeep(De),formUpdateEvent:async e=>{const l=f().cloneDeep(e);Fe(l)},isFormValidFlag:P}),(0,E.jsx)("div",{className:"row",children:(0,E.jsx)("div",{className:"col-md-12",children:(0,E.jsx)("div",{className:o["upload-wrapper"],children:(0,E.jsxs)("div",{className:"row pd-10",children:[(0,E.jsx)("div",{className:"col-md-12 ".concat(o["addition-field-header"]),children:(0,E.jsx)("h5",{className:"popup-heading",children:"MSA Attachment"})}),(0,E.jsx)("div",{className:"col-md-12",children:(0,E.jsx)("div",{className:o["upload-file-section"],children:(0,E.jsx)("div",{className:o["upload-file"],children:te?(0,E.jsxs)("div",{className:o["image-preview"],children:[(0,E.jsxs)("div",{className:"icon-ui677",children:[" ",(0,E.jsx)("i",{className:"pi pi-times-circle",onClick:yl,style:{color:"red",fontSize:"1rem"}})]}),(0,E.jsx)("img",{src:A.Z.PdfIcon,style:{width:"200px",height:"130px"},alt:"Preview"})]}):(0,E.jsxs)("div",{className:o["empty-upload"],children:[(0,E.jsx)("input",{type:"file",onClick:e=>{e.target.value=null},onChange:e=>fl(e.target.files),className:o.upload,style:{width:"unset"}}),(0,E.jsx)("img",{src:A.Z.FolderIconImage,alt:"Folder Icon"}),(0,E.jsxs)("p",{children:["Drag files here ",(0,E.jsx)("span",{children:" or browse"})," ",(0,E.jsx)("br",{}),(0,E.jsx)("u",{children:"Support PDF"})]})]})})})})]})})})})]}),(0,E.jsx)("div",{className:"popup-lower-btn",children:(0,E.jsx)(s.Q,{label:"Submit",icon:"pi pi-check",iconPos:"right",submitEvent:async e=>{e.preventDefault();let l=!0;if(f().each(De,(e=>{var i;null!==e&&void 0!==e&&null!==(i=e.validation)&&void 0!==i&&i.required&&(l=l&&e.value)})),U(l),l){var i,t;const e=new FormData,l={clientId:null===z||void 0===z?void 0:z.id,start_date:hl(null===De||void 0===De||null===(i=De.start_date)||void 0===i?void 0:i.value),end_date:hl(null===De||void 0===De||null===(t=De.end_date)||void 0===t?void 0:t.value),updated_by:ke};Object.entries(l).forEach((l=>{let[i,t]=l;e.set(i,t)})),null!==$&&void 0!==$&&$.length&&e.set("msaFile",$[0]),console.log("createClientForm : ",Ae,l),Ie.updateMSAFile(e).then((e=>{(null===e||void 0===e?void 0:e.statusCode)===_.B.CREATED&&(G({}),pl(),y.W.show(null===e||void 0===e?void 0:e.message,g.a.SUCCESS))})).catch((e=>{G({}),y.W.show(e,g.a.ERROR)}))}else y.W.show("Please Check all the Fields!",g.a.ERROR)}})})]})}):null]})};var M=i(1574),W=i(9496);class R{constructor(){this.getClientContactMaster=async e=>{try{const l=await W.S.postRequest(M.R.GET_CLIENT_CONTACT_MASTER,{clientContactId:e||null});return null===l||void 0===l?void 0:l.data}catch(l){return{}}},this.createClientContactMaster=async e=>{try{const l=await W.S.postRequest(M.R.CREATE_CLIENT_CONTACT_MASTER,e);return null===l||void 0===l?void 0:l.data}catch(l){return l}},this.updateClientContactMaster=async e=>{try{const l=await W.S.postRequest(M.R.UPDATE_CLIENT_CONTACT_MASTER,e);return null===l||void 0===l?void 0:l.data}catch(l){return l}},this.deactivateClientContactMaster=async e=>{try{const l={clientContactId:e.id,isActive:!e.isActive,updatedBy:null===e||void 0===e?void 0:e.loggedInUserId},i=await W.S.postRequest(M.R.TOGGLE_CLIENT_CONTACT_STATUS,l);return null===i||void 0===i?void 0:i.data}catch(l){return{}}}}}const k=()=>{const e={client_name:{inputType:"singleSelect",label:"Client",options:[],value:null,validation:{required:!1},fieldWidth:"col-md-6"},salutation:{inputType:"singleSelect",label:"Salutation",options:["Mr.","Ms.","Mrs."],value:null,validation:{required:!1},fieldWidth:"col-md-6"},first_name:{inputType:"inputtext",label:"First Name",value:null,validation:{required:!0},fieldWidth:"col-md-6"},last_name:{inputType:"inputtext",label:"Last Name",value:null,validation:{required:!1},fieldWidth:"col-md-6"},email:{inputType:"inputtext",label:"Email",value:null,validation:{required:!1},fieldWidth:"col-md-6"},phone:{inputType:"inputtext",label:"Phone Number",value:null,validation:{required:!1},fieldWidth:"col-md-6"}},[l,i]=(0,t.useState)([]),[a,o]=(0,t.useState)([]),[h,j]=(0,t.useState)(!1),[A,T]=(0,t.useState)(!1),[D,I]=(0,t.useState)(!1),[M,W]=(0,t.useState)(!0),[k,q]=(0,t.useState)(!1),[O,P]=(0,t.useState)([]),[U,B]=(0,t.useState)(),[V,H]=(0,t.useState)([]),[Y,z]=(0,t.useState)([]),[G,L]=(0,t.useState)([]),[J,Q]=(0,t.useState)([]),[Z,K]=(0,t.useState)([]),[X,$]=(0,t.useState)(""),[ee,le]=(0,t.useState)(""),[ie,te]=(0,t.useState)(!1),[ae,ne]=(0,t.useState)(!1),[oe,de]=(0,t.useState)([]),[se,ce]=(0,t.useState)([]),[re,ue]=(0,t.useState)([]),[ve,pe]=(0,t.useState)([]),[me,he]=(0,t.useState)([]),[fe,ye]=(0,t.useState)(e),[ge,_e]=(0,t.useState)(f().cloneDeep(fe)),xe=(new N.F,new R),Ne=(new w.R,new C._,(new p.A).get("userInfo")),be=null===Ne||void 0===Ne?void 0:Ne.userId;let Se;new v.m,new x.r,new b.W;const je=new S.d,Ae=[{label:"Action",fieldName:"action",textAlign:"left",frozen:!0,sort:!1,filter:!1,body:e=>(0,E.jsxs)("div",{style:{display:"flex",gap:"10px",marginLeft:"20px"},children:[(0,E.jsx)("span",{className:"pi pi-pencil",style:{cursor:"pointer"},title:"Update",onClick:()=>Fe(e)}),(0,E.jsx)("span",{className:"pi pi-".concat(e.isActive?"ban":"check-circle"),style:{cursor:"pointer"},title:e.isActive?"Deactivate":"Activate",onClick:()=>Me(e)})]})},{label:"Client Name",fieldName:"client_name",textAlign:"left",sort:!0,filter:!0,placeholder:"Client Name",body:e=>(0,E.jsxs)("div",{children:[(0,E.jsx)("span",{id:"clientNameTooltip-".concat(e.id),children:e.client_name}),(0,E.jsx)(m.m,{target:"#clientNameTooltip-".concat(e.id),position:"top"})]})},{label:"Salutation",fieldName:"salutation",textAlign:"left",sort:!0,filter:!0,placeholder:"Salutation",body:e=>(0,E.jsxs)("div",{children:[(0,E.jsx)("span",{id:"salutationTooltip-".concat(e.id),children:e.salutation}),(0,E.jsx)(m.m,{target:"#salutationTooltip-".concat(e.id),position:"top"})]})},{label:"First Name",fieldName:"first_name",textAlign:"left",sort:!0,filter:!0,placeholder:"First Name",body:e=>(0,E.jsxs)("div",{children:[(0,E.jsx)("span",{id:"firstNameTooltip-".concat(e.id),children:e.first_name}),(0,E.jsx)(m.m,{target:"#firstNameTooltip-".concat(e.id),position:"top"})]})},{label:"Last Name",fieldName:"last_name",textAlign:"left",sort:!0,filter:!0,placeholder:"Last Name",body:e=>(0,E.jsxs)("div",{children:[(0,E.jsx)("span",{id:"lastNameTooltip-".concat(e.id),children:e.last_name}),(0,E.jsx)(m.m,{target:"#lastNameTooltip-".concat(e.id),position:"top"})]})},{label:"Email",fieldName:"email",textAlign:"left",sort:!0,filter:!0,placeholder:"Email",body:e=>(0,E.jsxs)("div",{children:[(0,E.jsx)("span",{id:"emailTooltip-".concat(e.id),children:e.email}),(0,E.jsx)(m.m,{target:"#emailTooltip-".concat(e.id),position:"top"})]})},{label:"Phone Number",fieldName:"phone_number",textAlign:"left",sort:!0,filter:!0,placeholder:"Phone Number",body:e=>(0,E.jsxs)("div",{children:[(0,E.jsx)("span",{id:"phoneTooltip-".concat(e.id),children:e.phone_number}),(0,E.jsx)(m.m,{target:"#phoneTooltip-".concat(e.id),position:"top"})]})},{label:"Status",fieldName:"isActive",textAlign:"left",sort:!0,filter:!0,placeholder:"Status",body:e=>(0,E.jsx)("div",{children:(0,E.jsx)("span",{style:{color:1===(null===e||void 0===e?void 0:e.isActive)?"green":"red"},children:1===(null===e||void 0===e?void 0:e.isActive)?"Active":"Inactive"})})},{label:"Updated By",fieldName:"updated_by",textAlign:"left",sort:!0,filter:!0,placeholder:"Updated By",body:e=>(0,E.jsx)("div",{children:(0,E.jsx)("span",{children:e.updated_by})})},{label:"Updated At",fieldName:"updated_at",textAlign:"left",sort:!0,filter:!0,placeholder:"Updated At",body:e=>(0,E.jsx)("div",{children:(0,E.jsx)("span",{children:e.updated_at})})}];(0,t.useEffect)((()=>{0==A&&0==k&&(async()=>{await we();const e=await Ce();await Te(e)})()}),[A,k]);const we=async()=>{j(!0);try{var e;const l=await xe.getClientContactMaster();return console.log("chwckdas"),null===l||void 0===l||null===(e=l.clientContacts)||void 0===e||e.forEach((e=>{e.updated_at=e.updated_at?F()(e.updated_at).format("DD-MM-YYYY HH:mm:ss"):null})),he(null===l||void 0===l?void 0:l.clientContacts),null===l||void 0===l?void 0:l.clientContacts}catch(l){console.error(l)}finally{j(!1)}},Ce=async()=>{j(!0);try{var e;const l=await je.getClientMaster(),i=null===l||void 0===l||null===(e=l.clients)||void 0===e?void 0:e.filter((e=>(null===e||void 0===e?void 0:e.isactive)||(null===e||void 0===e?void 0:e.isActive)));return pe(i),i}catch(l){console.error(l)}finally{j(!1)}},Te=async function(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:ve).map((e=>null===e||void 0===e?void 0:e.client_name));fe.client_name.options=e,await ye(fe),await De(fe)},De=async e=>{_e(e)},Fe=e=>{B(e),Ie(e),T(!0),I(!0)},Ee=e=>{q(!1)},Ie=e=>{console.log("rrrrrrrrrrrr",e);try{fe.client_name.value=null===e||void 0===e?void 0:e.client_name,fe.salutation.value=null===e||void 0===e?void 0:e.salutation,fe.first_name.value=null===e||void 0===e?void 0:e.first_name,fe.last_name.value=null===e||void 0===e?void 0:e.last_name,fe.email.value=null===e||void 0===e?void 0:e.email,fe.phone.value=null===e||void 0===e?void 0:e.phone_number,_e(f().cloneDeep(fe))}catch(l){console.log("error",l)}},Me=e=>{Se=e,P({displayToggle:!1,title:"Delete",message:"Are you sure you want to ".concat(null!==e&&void 0!==e&&e.isactive||null!==e&&void 0!==e&&e.is_active||null!==e&&void 0!==e&&e.isActive?"deactivate":"activate"," this record?"),acceptFunction:We,rejectFunction:Ee}),q(!0)},We=()=>{j(!0),xe.deactivateClientContactMaster((0,d.A)((0,d.A)({},Se),{},{loggedInUserId:be})).then((()=>{var e;j(!1),q(!1),y.W.show("Client contact record ".concat(null!==(e=Se)&&void 0!==e&&e.isactive?"deactivated":"activated"," successfully"),g.a.SUCCESS)})).catch((e=>(j(!1),!1)))},Re=()=>{T(!1),I(!1),B({}),ye(f().cloneDeep(e)),_e(f().cloneDeep(e))};return h?(0,E.jsx)(n.a,{}):(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)("div",{style:{display:"flex",justifyContent:"end",marginBottom:"0.5em"},children:(0,E.jsx)(s.Q,{label:"Add New Contact",icon:"pi pi-check",iconPos:"right",submitEvent:async()=>{T(!0)}})}),(0,E.jsxs)("p",{className:"m-0",children:[(0,E.jsx)(c.A,{data:me,column:Ae,showGridlines:!0,resizableColumns:!0,rows:20,paginator:!0,sortable:!0,headerRequired:!0,scrollHeight:"calc(100vh - 200px)",downloadedfileName:"Client_Contact"}),k?(0,E.jsx)(r.A,{actionPopupToggle:O,onCloseFunction:Ee}):null]}),A?(0,E.jsx)("div",{className:"popup-overlay md-popup-overlay",children:(0,E.jsxs)("div",{className:"popup-body md-popup-body stretchLeft",children:[(0,E.jsxs)("div",{className:"popup-header ",children:[(0,E.jsxs)("div",{className:"popup-close",onClick:()=>{Re()},children:[(0,E.jsx)("i",{className:"pi pi-angle-left"}),(0,E.jsxs)("h4",{className:"popup-heading",children:[D?"Update":"Add New"," Contact"]})]}),(0,E.jsx)("div",{className:"popup-right-close",onClick:()=>{Re()},children:"\xd7"})]}),(0,E.jsx)("div",{className:"popup-content",style:{padding:"1rem 2rem"},children:(0,E.jsx)(u.A,{form:f().cloneDeep(ge),formUpdateEvent:async e=>{var i;const t=f().cloneDeep(e),a=null===V||void 0===V?void 0:V.find((e=>{var l;return(null===e||void 0===e?void 0:e.companyName)==(null===t||void 0===t||null===(l=t.companyName)||void 0===l?void 0:l.value)}));null===l||void 0===l||l.find((e=>(null===e||void 0===e?void 0:e.name)==(null===a||void 0===a?void 0:a.countryName)));1==(null===t||void 0===t||null===(i=t.nda_flag)||void 0===i?void 0:i.value)?te(!0):te(!1),console.log("isMSAChecked",t),_e(t)},isFormValidFlag:M})}),(0,E.jsx)("div",{className:"popup-lower-btn",children:(0,E.jsx)(s.Q,{label:"Submit",icon:"pi pi-check",iconPos:"right",submitEvent:async e=>{e.preventDefault();let l=!0;if(f().each(ge,(e=>{var i;null!==e&&void 0!==e&&null!==(i=e.validation)&&void 0!==i&&i.required&&(l=l&&e.value)})),W(l),l){var i,t,a,n,o,s;const e={client_name:null===ge||void 0===ge||null===(i=ge.client_name)||void 0===i?void 0:i.value,salutation:null===ge||void 0===ge||null===(t=ge.salutation)||void 0===t?void 0:t.value,first_name:null===ge||void 0===ge||null===(a=ge.first_name)||void 0===a?void 0:a.value,last_name:null===ge||void 0===ge||null===(n=ge.last_name)||void 0===n?void 0:n.value,email:null===ge||void 0===ge||null===(o=ge.email)||void 0===o?void 0:o.value,phone_number:null===ge||void 0===ge||null===(s=ge.phone)||void 0===s?void 0:s.value,updatedBy:be};if(console.log("koooo",e),null!==U&&void 0!==U&&U.id){const l=(0,d.A)((0,d.A)({},e),{},{clientContactId:null===U||void 0===U?void 0:U.id,isActive:null===U||void 0===U?void 0:U.isActive});xe.updateClientContactMaster(l).then((e=>{(null===e||void 0===e?void 0:e.statusCode)===_.B.SUCCESS&&(B({}),Re(),y.W.show(null===e||void 0===e?void 0:e.message,g.a.SUCCESS))})).catch((e=>{B({}),y.W.show(e,g.a.ERROR)}))}else xe.createClientContactMaster(e).then((e=>{(null===e||void 0===e?void 0:e.statusCode)===_.B.CREATED&&(B({}),Re(),y.W.show(null===e||void 0===e?void 0:e.message,g.a.SUCCESS))})).catch((e=>{B({}),y.W.show(e,g.a.ERROR)}))}else y.W.show("Please Check all the Fields!",g.a.ERROR)}})})]})}):null]})},q=()=>{const e={client_name:{inputType:"singleSelect",label:"Client",options:[],value:null,validation:{required:!0},fieldWidth:"col-md-6"},country_name:{inputType:"singleSelect",label:"Country",options:[],value:null,disable:!0,validation:{required:!1},fieldWidth:"col-md-6"},state_name:{inputType:"singleSelect",label:"State Name",options:[],value:null,disable:!1,validation:{required:!1},fieldWidth:"col-md-6"},state_code:{inputType:"inputtext",label:"State Code",value:null,validation:{required:!1},fieldWidth:"col-md-6"},gstIn:{inputType:"inputtext",label:"GSTN",value:null,validation:{required:!1},fieldWidth:"col-md-6"},iec_code:{inputType:"inputtext",label:"IEC Code",value:null,validation:{required:!1},fieldWidth:"col-md-6"},placeOfSupply:{inputType:"inputtext",label:"Place of Supply",value:null,validation:{required:!1},fieldWidth:"col-md-6"},address1:{inputType:"inputtext",label:"Address 1",value:null,validation:{required:!0},fieldWidth:"col-md-6"},address2:{inputType:"inputtext",label:"Address 2",value:null,validation:{required:!1},fieldWidth:"col-md-6"},address3:{inputType:"inputtext",label:"Address 3",value:null,validation:{required:!1},fieldWidth:"col-md-6"},isDefaultAddress:{inputType:"inputSwitch",label:"Is It Default Address",value:null,validation:{required:!1},fieldWidth:"col-md-6  mg-12-t"}},[l,i]=(0,t.useState)([]),[a,o]=(0,t.useState)([]),[h,j]=(0,t.useState)(!1),[A,T]=(0,t.useState)(!1),[D,I]=(0,t.useState)(!1),[M,W]=(0,t.useState)(!0),[k,q]=(0,t.useState)(!1),[O,P]=(0,t.useState)([]),[U,B]=(0,t.useState)(),[V,H]=(0,t.useState)([]),[Y,z]=(0,t.useState)([]),[G,L]=(0,t.useState)([]),[J,Q]=(0,t.useState)([]),[Z,K]=(0,t.useState)([]),[X,$]=(0,t.useState)(""),[ee,le]=(0,t.useState)(""),[ie,te]=(0,t.useState)(!1),[ae,ne]=(0,t.useState)(!1),[oe,de]=(0,t.useState)([]),[se,ce]=(0,t.useState)([]),[re,ue]=(0,t.useState)([]),[ve,pe]=(0,t.useState)([]),[me,he]=(0,t.useState)([]),[fe,ye]=(0,t.useState)([]),[ge,_e]=(0,t.useState)({}),[xe,Ne]=(0,t.useState)(),[be,Se]=(0,t.useState)(e),[je,Ae]=(0,t.useState)(f().cloneDeep(be)),we=(new N.F,new R,new w.R,new C._,(new p.A).get("userInfo")),Ce=null===we||void 0===we?void 0:we.userId;let Te;const De=new v.m,Fe=new x.r,Ee=(new b.W,new S.d),Ie=[{label:"Action",fieldName:"action",textAlign:"left",frozen:!0,width:"200px",sort:!1,filter:!1,body:e=>(0,E.jsxs)("div",{style:{display:"flex",gap:"10px",marginLeft:"20px"},children:[(0,E.jsx)("span",{className:"pi pi-pencil",style:{cursor:"pointer"},title:"Update",onClick:()=>Be(e)}),(0,E.jsx)("span",{className:"pi pi-".concat(e.isActive?"ban":"check-circle"),style:{cursor:"pointer"},title:e.isActive?"Deactivate":"Activate",onClick:()=>Ye(e)})]})},{label:"Client",fieldName:"client_name",textAlign:"left",sort:!0,filter:!0,fieldValue:"client_name",changeFilter:!0,placeholder:"Client",body:e=>(0,E.jsxs)("div",{children:[(0,E.jsx)("span",{id:"companyNameTooltip-".concat(e.id),children:e.client_name}),(0,E.jsx)(m.m,{target:"#companyNameTooltip-".concat(e.id),position:"top"})]})},{label:"Address 1",fieldName:"address1",textAlign:"left",sort:!0,filter:!0,fieldValue:"address1",changeFilter:!0,placeholder:"Address 1",body:e=>(0,E.jsxs)("div",{children:[(0,E.jsx)("span",{id:"companyNameTooltip-".concat(e.id),children:e.address1}),(0,E.jsx)(m.m,{target:"#companyNameTooltip-".concat(e.id),position:"top"})]})},{label:"Address 2",fieldName:"address2",textAlign:"left",sort:!0,filter:!0,fieldValue:"address2",changeFilter:!0,placeholder:"Address 2",body:e=>(0,E.jsxs)("div",{children:[(0,E.jsx)("span",{id:"companyNameTooltip-".concat(e.id),children:e.address2}),(0,E.jsx)(m.m,{target:"#companyNameTooltip-".concat(e.id),position:"top"})]})},{label:"Address 3",fieldName:"address3",textAlign:"left",sort:!0,filter:!0,fieldValue:"address3",changeFilter:!0,placeholder:"Address 3",body:e=>(0,E.jsxs)("div",{children:[(0,E.jsx)("span",{id:"companyNameTooltip-".concat(e.id),children:e.address3}),(0,E.jsx)(m.m,{target:"#companyNameTooltip-".concat(e.id),position:"top"})]})},{label:"Country",fieldName:"countryName",textAlign:"left",sort:!0,filter:!0,fieldValue:"countryName",changeFilter:!0,placeholder:"Country",body:e=>(0,E.jsxs)("div",{children:[(0,E.jsx)("span",{id:"companyNameTooltip-".concat(e.id),children:e.countryName}),(0,E.jsx)(m.m,{target:"#companyNameTooltip-".concat(e.id),position:"top"})]})},{label:"State Name",fieldName:"state_name",textAlign:"left",sort:!0,filter:!0,fieldValue:"state_name",changeFilter:!0,placeholder:"State Name",body:e=>(0,E.jsxs)("div",{children:[(0,E.jsx)("span",{id:"companyNameTooltip-".concat(e.id),children:e.state_name}),(0,E.jsx)(m.m,{target:"#companyNameTooltip-".concat(e.id),position:"top"})]})},{label:"State Code",fieldName:"state_code",textAlign:"left",sort:!0,filter:!0,fieldValue:"state_code",changeFilter:!0,placeholder:"State Code",body:e=>(0,E.jsxs)("div",{children:[(0,E.jsx)("span",{id:"companyNameTooltip-".concat(e.id),children:e.state_code}),(0,E.jsx)(m.m,{target:"#companyNameTooltip-".concat(e.id),position:"top"})]})},{label:"GSTN",fieldName:"gstIn",textAlign:"left",sort:!0,filter:!0,fieldValue:"gstIn",changeFilter:!0,placeholder:"gstn",body:e=>(0,E.jsxs)("div",{children:[(0,E.jsx)("span",{id:"companyNameTooltip-".concat(e.id),children:e.gstIn}),(0,E.jsx)(m.m,{target:"#companyNameTooltip-".concat(e.id),position:"top"})]})},{label:"Place Of Supply",fieldName:"placeOfSupply",textAlign:"left",sort:!0,filter:!0,fieldValue:"placeOfSupply",changeFilter:!0,placeholder:"place of supply",body:e=>(0,E.jsxs)("div",{children:[(0,E.jsx)("span",{id:"companyNameTooltip-".concat(e.id),children:e.placeOfSupply}),(0,E.jsx)(m.m,{target:"#companyNameTooltip-".concat(e.id),position:"top"})]})},{label:"Default Address",fieldName:"isDefaultAddress",textAlign:"left",frozen:!1,sort:!0,filter:!0,body:e=>(0,E.jsxs)("div",{children:[(0,E.jsx)("span",{id:"companyNameTooltip-".concat(e.id),children:1==e.isDefaultAddress?"Yes":"No"}),(0,E.jsx)(m.m,{target:"#companyNameTooltip-".concat(e.id),position:"top"})]})},{label:"Additional Address Details",fieldName:"additionalAddressDetails",textAlign:"left",sort:!0,filter:!0,fieldValue:"additionalAddressDetails",changeFilter:!0,placeholder:"Additional Address Details",body:e=>(0,E.jsxs)("div",{children:[(0,E.jsx)("span",{id:"companyNameTooltip-".concat(e.id),children:e.additionalAddressDetails}),(0,E.jsx)(m.m,{target:"#companyNameTooltip-".concat(e.id),position:"top"})]})},{label:"Status",fieldName:"isActive",textAlign:"left",frozen:!1,sort:!0,filter:!0,body:e=>(0,E.jsx)("div",{children:(0,E.jsx)("span",{style:{color:1===(null===e||void 0===e?void 0:e.isActive)?"green":"red"},children:1===(null===e||void 0===e?void 0:e.isActive)?"Active":"Inactive"})})}];(0,t.useEffect)((()=>{0==A&&0==k&&(async()=>{await Me();const e=await Ue(),l=await We(),i=await Re();await ke(l),await qe(i),await Oe(e)})()}),[A,k]);const Me=async()=>{j(!0);try{var e,l;const i=await Ee.getClientBillToMaster();return null===i||void 0===i||null===(e=i.data)||void 0===e||e.forEach((e=>{e.updated_at=e.updated_at?F()(e.updated_at).format("DD-MM-YYYY HH:mm:ss"):null})),ye(null===i||void 0===i?void 0:i.data),console.log("bbbbbbbbbb",null===i||void 0===i?void 0:i.data),Ne((null===i||void 0===i||null===(l=i.data)||void 0===l?void 0:l.find((e=>1==e.isDefaultAddress)))||{}),null===i||void 0===i?void 0:i.data}catch(i){console.error(i)}finally{j(!1)}},We=async()=>{j(!0);try{var e;const l=await De.getCountryMaster(),t=null===l||void 0===l||null===(e=l.countries)||void 0===e?void 0:e.filter((e=>(null===e||void 0===e?void 0:e.isactive)||(null===e||void 0===e?void 0:e.isActive)));return i(t),t}catch(l){console.error(l)}finally{j(!1)}},Re=async()=>{j(!0);try{var e;const l=await Fe.getStateMaster(),i=null===l||void 0===l||null===(e=l.states)||void 0===e?void 0:e.filter((e=>(null===e||void 0===e?void 0:e.isactive)||(null===e||void 0===e?void 0:e.isActive)));return o(i),i}catch(l){console.error(l)}finally{j(!1)}},ke=async function(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:l).map((e=>null===e||void 0===e?void 0:e.name));be.country_name.options=e,await Se(be),await Pe(be)},qe=async function(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:a).map((e=>e.state_name));be.state_name.options=e,await Se(be),await Pe(be)},Oe=async function(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:ve).map((e=>null===e||void 0===e?void 0:e.client_name));be.client_name.options=e,await Se(be),await Pe(be)},Pe=async e=>{var i,t;const n=f().cloneDeep(e);if((null===n||void 0===n||null===(i=n.client_name)||void 0===i?void 0:i.value)!=(null===je||void 0===je||null===(t=je.client_name)||void 0===t?void 0:t.value)){const e=null===ve||void 0===ve?void 0:ve.find((e=>{var l;return(null===e||void 0===e?void 0:e.client_name)==(null===n||void 0===n||null===(l=n.client_name)||void 0===l?void 0:l.value)})),i=null===l||void 0===l?void 0:l.find((l=>(null===l||void 0===l?void 0:l.name)==(null===e||void 0===e?void 0:e.countryName)));if(i){if(n.country_name.value=null===e||void 0===e?void 0:e.countryName,a){const e=null===a||void 0===a?void 0:a.map((e=>e.stateName));n.state_name.options=e||[],n.state_name.value=null}console.log("gggggggggg",n);const l=(null===xe||void 0===xe?void 0:xe.additionalAddressDetails)&&JSON.parse(null===xe||void 0===xe?void 0:xe.additionalAddressDetails);if(null!==xe&&void 0!==xe&&xe.id){var o;n.address1.value=null===xe||void 0===xe?void 0:xe.address1,n.address2.value=null===xe||void 0===xe?void 0:xe.address2,n.address3.value=null===xe||void 0===xe?void 0:xe.address3,n.state_name.value=null===xe||void 0===xe?void 0:xe.state_name,n.placeOfSupply.value=null===xe||void 0===xe?void 0:xe.placeOfSupply,n.state_code.value=null===xe||void 0===xe?void 0:xe.state_code,n.gstIn.value=null===xe||void 0===xe?void 0:xe.gstIn;const e=JSON.parse(null===i||void 0===i?void 0:i.addressAdditionalFields);console.log("defaultBillingAddress -----\x3e",e);const t=null===(o=Object.keys(e))||void 0===o?void 0:o.reduce(((i,t,a)=>{const n=e[t],o=l[n];return i[a]={inputType:"inputtext",label:n,value:o||null,validation:{required:!0},fieldWidth:"col-md-4"},i}),{});_e(t)}else{var d;const e=JSON.parse(null===i||void 0===i?void 0:i.addressAdditionalFields),l=null===(d=Object.keys(e))||void 0===d?void 0:d.reduce(((l,i,t)=>(l[t]={inputType:"inputtext",label:e[i],value:null,validation:{required:!0},fieldWidth:"col-md-4"},l)),{});_e(l)}}}Ae(n)},Ue=async()=>{j(!0);try{var e;const l=await Ee.getClientMaster(),i=null===l||void 0===l||null===(e=l.clients)||void 0===e?void 0:e.filter((e=>(null===e||void 0===e?void 0:e.isactive)||(null===e||void 0===e?void 0:e.isActive)));return pe(i),i}catch(l){console.error(l)}finally{j(!1)}},Be=e=>{B(e),He(e),T(!0),I(!0)},Ve=e=>{q(!1)},He=async e=>{console.log("data-------\x3e",e);try{var l;je.client_name.value=null===e||void 0===e?void 0:e.client_name,je.address1.value=null===e||void 0===e?void 0:e.address1,je.address2.value=null===e||void 0===e?void 0:e.address2,je.address3.value=null===e||void 0===e?void 0:e.address3,je.state_name.options=(null===a||void 0===a?void 0:a.map((e=>e.stateName)))||[],je.state_code.value=null===e||void 0===e?void 0:e.state_code,je.gstIn.value=null===e||void 0===e?void 0:e.gstIn,je.iec_code.value=(null===e||void 0===e?void 0:e.iec_code)||"",je.placeOfSupply.value=null===e||void 0===e?void 0:e.placeOfSupply,je.state_name.value=null===e||void 0===e?void 0:e.state_name,je.country_name.value=null===e||void 0===e?void 0:e.countryName,je.isDefaultAddress.value=1==(null===e||void 0===e?void 0:e.isDefaultAddress);const i=JSON.parse(null===e||void 0===e?void 0:e.additionalAddressDetails),t=null===(l=Object.keys(i))||void 0===l?void 0:l.reduce(((e,l,t)=>(e[t]={inputType:"inputtext",label:l,value:i[l],validation:{required:!1},fieldWidth:"col-md-4"},e)),{});_e(t)}catch(i){console.log("error",i)}},Ye=e=>{Te=e,P({displayToggle:!1,title:"Delete",message:"Are you sure you want to ".concat(null!==e&&void 0!==e&&e.isactive||null!==e&&void 0!==e&&e.is_active||null!==e&&void 0!==e&&e.isActive?"deactivate":"activate"," this record?"),acceptFunction:ze,rejectFunction:Ve}),q(!0)},ze=()=>{j(!0),Ee.deactivateClientBillToMaster((0,d.A)((0,d.A)({},Te),{},{loggedInUserId:Ce})).then((()=>{var e;j(!1),q(!1),y.W.show("Client billing info ".concat(null!==(e=Te)&&void 0!==e&&e.isactive?"deactivated":"activated"," successfully"),g.a.SUCCESS)})).catch((e=>(j(!1),!1)))},Ge=()=>{T(!1),I(!1),B({}),Se(f().cloneDeep(e)),Ae(f().cloneDeep(e)),_e({})};return h?(0,E.jsx)(n.a,{}):(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)("div",{style:{display:"flex",justifyContent:"end",marginBottom:"0.5em"},children:(0,E.jsx)(s.Q,{label:"Add New Billing Info",icon:"pi pi-check",iconPos:"right",submitEvent:async()=>{T(!0)}})}),(0,E.jsxs)("p",{className:"m-0",children:[(0,E.jsx)(c.A,{data:fe,column:Ie,showGridlines:!0,resizableColumns:!0,rows:20,paginator:!0,sortable:!0,headerRequired:!0,scrollHeight:"calc(100vh - 200px)",downloadedfileName:"Client_Bill_To"}),k?(0,E.jsx)(r.A,{actionPopupToggle:O,onCloseFunction:Ve}):null]}),A?(0,E.jsx)("div",{className:"popup-overlay md-popup-overlay",children:(0,E.jsxs)("div",{className:"popup-body md-popup-body stretchLeft",children:[(0,E.jsxs)("div",{className:"popup-header ",children:[(0,E.jsxs)("div",{className:"popup-close",onClick:()=>{Ge()},children:[(0,E.jsx)("i",{className:"pi pi-angle-left"}),(0,E.jsxs)("h4",{className:"popup-heading",children:[D?"Update":"Add New"," Billing Info"]})]}),(0,E.jsx)("div",{className:"popup-right-close",onClick:()=>{Ge()},children:"\xd7"})]}),(0,E.jsxs)("div",{className:"popup-content",style:{padding:"1rem 2rem"},children:[(0,E.jsx)(u.A,{form:f().cloneDeep(je),formUpdateEvent:Pe,isFormValidFlag:M}),(0,E.jsx)(u.A,{form:f().cloneDeep(ge),formUpdateEvent:async e=>{_e(e)},isFormValidFlag:M})]}),(0,E.jsx)("div",{className:"popup-lower-btn",children:(0,E.jsx)(s.Q,{label:"Submit",icon:"pi pi-check",iconPos:"right",submitEvent:async e=>{e.preventDefault();let i=!0;if(f().each(je,(e=>{var l;null!==e&&void 0!==e&&null!==(l=e.validation)&&void 0!==l&&l.required&&(i=i&&e.value)})),console.log("clientForm",je,i),W(i),i){var t,a,n,o,s,c,r,u,v,p,m,h,x,N,b;const e=null!==(t=null===(a=ve.find((e=>e.client_name===je.client_name.value)))||void 0===a?void 0:a.id)&&void 0!==t?t:null,i=null!==(n=null===(o=l.find((e=>e.name===je.country_name.value)))||void 0===o?void 0:o.id)&&void 0!==n?n:null;if(console.log("hiiii",i),1==(null===je||void 0===je||null===(s=je.isDefaultAddress)||void 0===s?void 0:s.value)){var S;let e=!1;if(null===fe||void 0===fe||null===(S=fe.filter((e=>(null===e||void 0===e?void 0:e.client_name)==je.client_name.value)))||void 0===S||S.forEach((l=>{e=e||(null===l||void 0===l?void 0:l.isDefaultAddress)})),e)return void y.W.show("A default address for this company is already present",g.a.ERROR)}const f=null===(c=Object.keys(ge))||void 0===c?void 0:c.reduce(((e,l,i)=>{var t,a,n;null!=(null===(t=ge[i])||void 0===t?void 0:t.value)&&(e[null===(a=ge[i])||void 0===a?void 0:a.label]=null===(n=ge[i])||void 0===n?void 0:n.value);return e}),{}),j={clientId:e,countryId:i,state_name:null===je||void 0===je||null===(r=je.state_name)||void 0===r?void 0:r.value,state_code:null===je||void 0===je||null===(u=je.state_code)||void 0===u?void 0:u.value,gstIn:null===je||void 0===je||null===(v=je.gstIn)||void 0===v?void 0:v.value,iec_code:null===je||void 0===je||null===(p=je.iec_code)||void 0===p?void 0:p.value,placeOfSupply:null===je||void 0===je||null===(m=je.placeOfSupply)||void 0===m?void 0:m.value,address1:null===je||void 0===je||null===(h=je.address1)||void 0===h?void 0:h.value,address2:null===je||void 0===je||null===(x=je.address2)||void 0===x?void 0:x.value,address3:null===je||void 0===je||null===(N=je.address3)||void 0===N?void 0:N.value,additionalAddressDetails:f,isDefaultAddress:1==(null===je||void 0===je||null===(b=je.isDefaultAddress)||void 0===b?void 0:b.value)?1:0,updated_by:Ce};if(null!==U&&void 0!==U&&U.id){const e=(0,d.A)((0,d.A)({},j),{},{id:null===U||void 0===U?void 0:U.id});Ee.updateClientBillToMaster(e).then((e=>{(null===e||void 0===e?void 0:e.statusCode)===_.B.SUCCESS&&(B({}),Ge(),y.W.show(null===e||void 0===e?void 0:e.message,g.a.SUCCESS))})).catch((e=>{B({}),y.W.show(e,g.a.ERROR)}))}else Ee.createClientBillToMaster(j).then((e=>{(null===e||void 0===e?void 0:e.statusCode)===_.B.CREATED&&(B({}),Ge(),y.W.show(null===e||void 0===e?void 0:e.message,g.a.SUCCESS))})).catch((e=>{B({}),y.W.show(e,g.a.ERROR)}))}else y.W.show("Please Check all the Fields!",g.a.ERROR)}})})]})}):null]})},O=()=>{const e={client_name:{inputType:"singleSelect",label:"Client",options:[],value:null,validation:{required:!0},fieldWidth:"col-md-6"},country_name:{inputType:"singleSelect",label:"Country",options:[],value:null,disable:!0,validation:{required:!1},fieldWidth:"col-md-6"},state_name:{inputType:"singleSelect",label:"State Name",options:[],value:null,disable:!1,validation:{required:!1},fieldWidth:"col-md-6"},state_code:{inputType:"inputtext",label:"State Code",value:null,validation:{required:!1},fieldWidth:"col-md-6"},gstIn:{inputType:"inputtext",label:"GSTN",value:null,validation:{required:!1},fieldWidth:"col-md-6"},placeOfSupply:{inputType:"inputtext",label:"Place of Supply",value:null,validation:{required:!1},fieldWidth:"col-md-6"},address1:{inputType:"inputtext",label:"Address 1",value:null,validation:{required:!0},fieldWidth:"col-md-6"},address2:{inputType:"inputtext",label:"Address 2",value:null,validation:{required:!1},fieldWidth:"col-md-6"},address3:{inputType:"inputtext",label:"Address 3",value:null,validation:{required:!1},fieldWidth:"col-md-6"},isDefaultAddress:{inputType:"inputSwitch",label:"Is It Default Address",value:null,validation:{required:!1},fieldWidth:"col-md-6  mg-12-t"}},[l,i]=(0,t.useState)([]),[a,o]=(0,t.useState)([]),[h,j]=(0,t.useState)(!1),[A,T]=(0,t.useState)(!1),[D,I]=(0,t.useState)(!1),[M,W]=(0,t.useState)(!0),[k,q]=(0,t.useState)(!1),[O,P]=(0,t.useState)([]),[U,B]=(0,t.useState)(),[V,H]=(0,t.useState)([]),[Y,z]=(0,t.useState)([]),[G,L]=(0,t.useState)([]),[J,Q]=(0,t.useState)([]),[Z,K]=(0,t.useState)([]),[X,$]=(0,t.useState)(""),[ee,le]=(0,t.useState)(""),[ie,te]=(0,t.useState)(!1),[ae,ne]=(0,t.useState)(!1),[oe,de]=(0,t.useState)([]),[se,ce]=(0,t.useState)([]),[re,ue]=(0,t.useState)([]),[ve,pe]=(0,t.useState)([]),[me,he]=(0,t.useState)([]),[fe,ye]=(0,t.useState)([]),[ge,_e]=(0,t.useState)([]),[xe,Ne]=(0,t.useState)({}),[be,Se]=(0,t.useState)(e),[je,Ae]=(0,t.useState)(f().cloneDeep(be)),we=(new N.F,new R,new w.R,new C._,(new p.A).get("userInfo")),Ce=null===we||void 0===we?void 0:we.userId;let Te;const De=new v.m,Fe=new x.r,Ee=(new b.W,new S.d),Ie=[{label:"Action",fieldName:"action",textAlign:"left",frozen:!0,sort:!1,filter:!1,body:e=>(0,E.jsxs)("div",{style:{display:"flex",gap:"10px",marginLeft:"20px"},children:[(0,E.jsx)("span",{className:"pi pi-pencil",style:{cursor:"pointer"},title:"Update",onClick:()=>Ve(e)}),(0,E.jsx)("span",{className:"pi pi-".concat(e.isActive?"ban":"check-circle"),style:{cursor:"pointer"},title:e.isActive?"Deactivate":"Activate",onClick:()=>ze(e)})]})},{label:"Client",fieldName:"client_name",textAlign:"left",sort:!0,filter:!0,fieldValue:"client_name",changeFilter:!0,placeholder:"Client",body:e=>(0,E.jsxs)("div",{children:[(0,E.jsx)("span",{id:"companyNameTooltip-".concat(e.id),children:e.client_name}),(0,E.jsx)(m.m,{target:"#companyNameTooltip-".concat(e.id),position:"top"})]})},{label:"Address 1",fieldName:"address1",textAlign:"left",sort:!0,filter:!0,fieldValue:"address1",changeFilter:!0,placeholder:"Address 1",body:e=>(0,E.jsxs)("div",{children:[(0,E.jsx)("span",{id:"companyNameTooltip-".concat(e.id),children:e.address1}),(0,E.jsx)(m.m,{target:"#companyNameTooltip-".concat(e.id),position:"top"})]})},{label:"Address 2",fieldName:"address2",textAlign:"left",sort:!0,filter:!0,fieldValue:"address2",changeFilter:!0,placeholder:"Address 2",body:e=>(0,E.jsxs)("div",{children:[(0,E.jsx)("span",{id:"companyNameTooltip-".concat(e.id),children:e.address2}),(0,E.jsx)(m.m,{target:"#companyNameTooltip-".concat(e.id),position:"top"})]})},{label:"Address 3",fieldName:"address3",textAlign:"left",sort:!0,filter:!0,fieldValue:"address3",changeFilter:!0,placeholder:"Address 3",body:e=>(0,E.jsxs)("div",{children:[(0,E.jsx)("span",{id:"companyNameTooltip-".concat(e.id),children:e.address3}),(0,E.jsx)(m.m,{target:"#companyNameTooltip-".concat(e.id),position:"top"})]})},{label:"Country",fieldName:"countryName",textAlign:"left",sort:!0,filter:!0,fieldValue:"countryName",changeFilter:!0,placeholder:"Country",body:e=>(0,E.jsxs)("div",{children:[(0,E.jsx)("span",{id:"companyNameTooltip-".concat(e.id),children:e.countryName}),(0,E.jsx)(m.m,{target:"#companyNameTooltip-".concat(e.id),position:"top"})]})},{label:"State Name",fieldName:"state_name",textAlign:"left",sort:!0,filter:!0,fieldValue:"state_name",changeFilter:!0,placeholder:"State Name",body:e=>(0,E.jsxs)("div",{children:[(0,E.jsx)("span",{id:"companyNameTooltip-".concat(e.id),children:e.state_name}),(0,E.jsx)(m.m,{target:"#companyNameTooltip-".concat(e.id),position:"top"})]})},{label:"State Code",fieldName:"state_code",textAlign:"left",sort:!0,filter:!0,fieldValue:"state_code",changeFilter:!0,placeholder:"State Code",body:e=>(0,E.jsxs)("div",{children:[(0,E.jsx)("span",{id:"companyNameTooltip-".concat(e.id),children:e.state_code}),(0,E.jsx)(m.m,{target:"#companyNameTooltip-".concat(e.id),position:"top"})]})},{label:"GSTN",fieldName:"gstIn",textAlign:"left",sort:!0,filter:!0,fieldValue:"gstIn",changeFilter:!0,placeholder:"gstn",body:e=>(0,E.jsxs)("div",{children:[(0,E.jsx)("span",{id:"companyNameTooltip-".concat(e.id),children:e.gstIn}),(0,E.jsx)(m.m,{target:"#companyNameTooltip-".concat(e.id),position:"top"})]})},{label:"Place Of Supply",fieldName:"placeOfSupply",textAlign:"left",sort:!0,filter:!0,fieldValue:"placeOfSupply",changeFilter:!0,placeholder:"place of supply",body:e=>(0,E.jsxs)("div",{children:[(0,E.jsx)("span",{id:"companyNameTooltip-".concat(e.id),children:e.placeOfSupply}),(0,E.jsx)(m.m,{target:"#companyNameTooltip-".concat(e.id),position:"top"})]})},{label:"Default Address",fieldName:"isDefaultAddress",textAlign:"left",frozen:!1,sort:!0,filter:!0,body:e=>(0,E.jsxs)("div",{children:[(0,E.jsx)("span",{id:"companyNameTooltip-".concat(e.id),children:1==e.isDefaultAddress?"Yes":"No"}),(0,E.jsx)(m.m,{target:"#companyNameTooltip-".concat(e.id),position:"top"})]})},{label:"Additional Address Details",fieldName:"additionalAddressDetails",textAlign:"left",sort:!0,filter:!0,fieldValue:"additionalAddressDetails",changeFilter:!0,placeholder:"Additional Address Details",body:e=>(0,E.jsxs)("div",{children:[(0,E.jsx)("span",{id:"companyNameTooltip-".concat(e.id),children:e.additionalAddressDetails}),(0,E.jsx)(m.m,{target:"#companyNameTooltip-".concat(e.id),position:"top"})]})},{label:"Status",fieldName:"isActive",textAlign:"left",frozen:!1,sort:!0,filter:!0,body:e=>(0,E.jsx)("div",{children:(0,E.jsx)("span",{style:{color:1===(null===e||void 0===e?void 0:e.isActive)?"green":"red"},children:1===(null===e||void 0===e?void 0:e.isActive)?"Active":"Inactive"})})}];(0,t.useEffect)((()=>{0==A&&0==k&&(async()=>{await Me(),await We();const e=await Be(),l=await Re(),i=await ke();await qe(l),await Oe(i),await Pe(e)})()}),[A,k]);const Me=async()=>{j(!0);try{var e;const l=await Ee.getClientShipToMaster();return null===l||void 0===l||null===(e=l.data)||void 0===e||e.forEach((e=>{e.updated_at=e.updated_at?F()(e.updated_at).format("DD-MM-YYYY HH:mm:ss"):null})),ye(null===l||void 0===l?void 0:l.data),null===l||void 0===l?void 0:l.data}catch(l){console.error(l)}finally{j(!1)}},We=async()=>{try{const e=await Ee.getClientBillToMaster();_e(null===e||void 0===e?void 0:e.data)}catch(e){console.error(e)}},Re=async()=>{j(!0);try{var e;const l=await De.getCountryMaster(),t=null===l||void 0===l||null===(e=l.countries)||void 0===e?void 0:e.filter((e=>(null===e||void 0===e?void 0:e.isactive)||(null===e||void 0===e?void 0:e.isActive)));return i(t),t}catch(l){console.error(l)}finally{j(!1)}},ke=async()=>{j(!0);try{var e;const l=await Fe.getStateMaster(),i=null===l||void 0===l||null===(e=l.states)||void 0===e?void 0:e.filter((e=>(null===e||void 0===e?void 0:e.isactive)||(null===e||void 0===e?void 0:e.isActive)));return o(i),i}catch(l){console.error(l)}finally{j(!1)}},qe=async function(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:l).map((e=>null===e||void 0===e?void 0:e.name));be.country_name.options=e,await Se(be),await Ue(be)},Oe=async function(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:a).map((e=>e.state_name));be.state_name.options=e,await Se(be),await Ue(be)},Pe=async function(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:ve).map((e=>null===e||void 0===e?void 0:e.client_name));be.client_name.options=e,await Se(be),await Ue(be)},Ue=async e=>{var i,t,n,o;const d=f().cloneDeep(e);if(console.log("bbbbbbbbbb",null===d||void 0===d||null===(i=d.client_name)||void 0===i?void 0:i.value,null===je||void 0===je||null===(t=je.client_name)||void 0===t?void 0:t.value),(null===d||void 0===d||null===(n=d.client_name)||void 0===n?void 0:n.value)!=(null===je||void 0===je||null===(o=je.client_name)||void 0===o?void 0:o.value)){const e=null===ve||void 0===ve?void 0:ve.find((e=>{var l;return(null===e||void 0===e?void 0:e.client_name)==(null===d||void 0===d||null===(l=d.client_name)||void 0===l?void 0:l.value)})),i=null===l||void 0===l?void 0:l.find((l=>(null===l||void 0===l?void 0:l.name)==(null===e||void 0===e?void 0:e.countryName)));if(i&&(d.country_name.value=null===e||void 0===e?void 0:e.countryName,a)){const e=null===a||void 0===a?void 0:a.map((e=>e.stateName));d.state_name.options=e||[],d.state_name.value=null}const t=null===ge||void 0===ge?void 0:ge.find((e=>{var l;return e.client_name==(null===d||void 0===d||null===(l=d.client_name)||void 0===l?void 0:l.value)&&1==(null===e||void 0===e?void 0:e.isDefaultAddress)}));console.log("bbbbbbbbbb",t);const n=(null===t||void 0===t?void 0:t.additionalAddressDetails)&&JSON.parse(null===t||void 0===t?void 0:t.additionalAddressDetails);if(console.log("defaultBillingAddress -----\x3e",t),null!==t&&void 0!==t&&t.id){var s;d.address1.value=null===t||void 0===t?void 0:t.address1,d.address2.value=null===t||void 0===t?void 0:t.address2,d.address3.value=null===t||void 0===t?void 0:t.address3,d.state_name.value=null===t||void 0===t?void 0:t.state_name,d.placeOfSupply.value=null===t||void 0===t?void 0:t.placeOfSupply,d.state_code.value=null===t||void 0===t?void 0:t.state_code,d.gstIn.value=null===t||void 0===t?void 0:t.gstIn;const e=JSON.parse(null===i||void 0===i?void 0:i.addressAdditionalFields),l=null===(s=Object.keys(e))||void 0===s?void 0:s.reduce(((l,i,t)=>{const a=e[i],o=n[a];return l[t]={inputType:"inputtext",label:a,value:o||null,validation:{required:!0},fieldWidth:"col-md-4"},l}),{});Ne(l)}else{var c;const e=JSON.parse(null===i||void 0===i?void 0:i.addressAdditionalFields),l=null===(c=Object.keys(e))||void 0===c?void 0:c.reduce(((l,i,t)=>(l[t]={inputType:"inputtext",label:e[i],value:null,validation:{required:!0},fieldWidth:"col-md-4"},l)),{});Ne(l)}}Ae(d)},Be=async()=>{j(!0);try{var e;const l=await Ee.getClientMaster(),i=null===l||void 0===l||null===(e=l.clients)||void 0===e?void 0:e.filter((e=>(null===e||void 0===e?void 0:e.isactive)||(null===e||void 0===e?void 0:e.isActive)));return pe(i),i}catch(l){console.error(l)}finally{j(!1)}},Ve=e=>{B(e),Ye(e),T(!0),I(!0)},He=e=>{q(!1)},Ye=async e=>{console.log("data-------\x3e",e);try{var i;je.client_name.value=null===e||void 0===e?void 0:e.client_name,je.address1.value=null===e||void 0===e?void 0:e.address1,je.address2.value=null===e||void 0===e?void 0:e.address2,je.address3.value=null===e||void 0===e?void 0:e.address3,je.state_name.options=(null===a||void 0===a?void 0:a.map((e=>e.stateName)))||[],je.state_code.value=null===e||void 0===e?void 0:e.state_code,je.gstIn.value=null===e||void 0===e?void 0:e.gstIn,je.placeOfSupply.value=null===e||void 0===e?void 0:e.placeOfSupply,je.state_name.value=null===e||void 0===e?void 0:e.state_name,je.country_name.value=null===e||void 0===e?void 0:e.countryName,je.isDefaultAddress.value=1==(null===e||void 0===e?void 0:e.isDefaultAddress);const o=JSON.parse(null===e||void 0===e?void 0:e.additionalAddressDetails);if(null!==(i=Object.keys(o))&&void 0!==i&&i.length){var t;const e=null===(t=Object.keys(o))||void 0===t?void 0:t.reduce(((e,l,i)=>(e[i]={inputType:"inputtext",label:l,value:o[l],validation:{required:!1},fieldWidth:"col-md-4"},e)),{});Ne(e)}else{var n;const i=null===l||void 0===l?void 0:l.find((l=>(null===l||void 0===l?void 0:l.name)==(null===e||void 0===e?void 0:e.countryName))),t=JSON.parse(null===i||void 0===i?void 0:i.addressAdditionalFields),a=null===(n=Object.keys(t))||void 0===n?void 0:n.reduce(((e,l,i)=>(e[i]={inputType:"inputtext",label:t[l],value:null,validation:{required:!0},fieldWidth:"col-md-4"},e)),{});Ne(a)}}catch(o){console.log("error",o)}},ze=e=>{Te=e,P({displayToggle:!1,title:"Delete",message:"Are you sure you want to ".concat(null!==e&&void 0!==e&&e.isactive||null!==e&&void 0!==e&&e.is_active||null!==e&&void 0!==e&&e.isActive?"deactivate":"activate"," this record?"),acceptFunction:Ge,rejectFunction:He}),q(!0)},Ge=()=>{j(!0),Ee.deactivateClientShipToMaster((0,d.A)((0,d.A)({},Te),{},{loggedInUserId:Ce})).then((()=>{var e;j(!1),q(!1),y.W.show("State record ".concat(null!==(e=Te)&&void 0!==e&&e.isactive?"deactivated":"activated"," successfully"),g.a.SUCCESS)})).catch((e=>(j(!1),!1)))},Le=()=>{T(!1),I(!1),B({}),Se(f().cloneDeep(e)),Ae(f().cloneDeep(e)),Ne({})};return h?(0,E.jsx)(n.a,{}):(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)("div",{style:{display:"flex",justifyContent:"end",marginBottom:"0.5em"},children:(0,E.jsx)(s.Q,{label:"Add New Shipping Info",icon:"pi pi-check",iconPos:"right",submitEvent:async()=>{T(!0)}})}),(0,E.jsxs)("p",{className:"m-0",children:[(0,E.jsx)(c.A,{data:fe,column:Ie,showGridlines:!0,resizableColumns:!0,rows:20,paginator:!0,sortable:!0,headerRequired:!0,scrollHeight:"calc(100vh - 200px)",downloadedfileName:"Client_Ship_To"}),k?(0,E.jsx)(r.A,{actionPopupToggle:O,onCloseFunction:He}):null]}),A?(0,E.jsx)("div",{className:"popup-overlay md-popup-overlay",children:(0,E.jsxs)("div",{className:"popup-body md-popup-body stretchLeft",children:[(0,E.jsxs)("div",{className:"popup-header ",children:[(0,E.jsxs)("div",{className:"popup-close",onClick:()=>{Le()},children:[(0,E.jsx)("i",{className:"pi pi-angle-left"}),(0,E.jsxs)("h4",{className:"popup-heading",children:[D?"Update":"Add New"," Shipping Info"]})]}),(0,E.jsx)("div",{className:"popup-right-close",onClick:()=>{Le()},children:"\xd7"})]}),(0,E.jsxs)("div",{className:"popup-content",style:{padding:"1rem 2rem"},children:[(0,E.jsx)(u.A,{form:f().cloneDeep(je),formUpdateEvent:Ue,isFormValidFlag:M}),(0,E.jsx)(u.A,{form:f().cloneDeep(xe),formUpdateEvent:async e=>{Ne(e)},isFormValidFlag:M})]}),(0,E.jsx)("div",{className:"popup-lower-btn",children:(0,E.jsx)(s.Q,{label:"Submit",icon:"pi pi-check",iconPos:"right",submitEvent:async e=>{e.preventDefault();let i=!0;if(f().each(je,(e=>{var l;null!==e&&void 0!==e&&null!==(l=e.validation)&&void 0!==l&&l.required&&(i=i&&e.value)})),W(i),i){var t,a,n,o,s,c,r,u,v,p,m,h,x,N;const e=null!==(t=null===(a=ve.find((e=>e.client_name===je.client_name.value)))||void 0===a?void 0:a.id)&&void 0!==t?t:null,i=null!==(n=null===(o=l.find((e=>e.name===je.country_name.value)))||void 0===o?void 0:o.id)&&void 0!==n?n:null;if(1==(null===je||void 0===je||null===(s=je.isDefaultAddress)||void 0===s?void 0:s.value)){var b;let e=!1;if(null===fe||void 0===fe||null===(b=fe.filter((e=>(null===e||void 0===e?void 0:e.client_name)==je.client_name.value)))||void 0===b||b.forEach((l=>{e=e||(null===l||void 0===l?void 0:l.isDefaultAddress)})),e)return void y.W.show("A default address for this company is already present",g.a.ERROR)}const f=null===(c=Object.keys(xe))||void 0===c?void 0:c.reduce(((e,l,i)=>{var t,a,n;null!=(null===(t=xe[i])||void 0===t?void 0:t.value)&&(e[null===(a=xe[i])||void 0===a?void 0:a.label]=null===(n=xe[i])||void 0===n?void 0:n.value);return e}),{}),S={clientId:e,countryId:i,state_name:null===je||void 0===je||null===(r=je.state_name)||void 0===r?void 0:r.value,state_code:null===je||void 0===je||null===(u=je.state_code)||void 0===u?void 0:u.value,gstIn:null===je||void 0===je||null===(v=je.gstIn)||void 0===v?void 0:v.value,placeOfSupply:null===je||void 0===je||null===(p=je.placeOfSupply)||void 0===p?void 0:p.value,address1:null===je||void 0===je||null===(m=je.address1)||void 0===m?void 0:m.value,address2:null===je||void 0===je||null===(h=je.address2)||void 0===h?void 0:h.value,address3:null===je||void 0===je||null===(x=je.address3)||void 0===x?void 0:x.value,additionalAddressDetails:f,isDefaultAddress:1==(null===je||void 0===je||null===(N=je.isDefaultAddress)||void 0===N?void 0:N.value)?1:0,updated_by:Ce};if(null!==U&&void 0!==U&&U.id){const e=(0,d.A)((0,d.A)({},S),{},{id:null===U||void 0===U?void 0:U.id});Ee.updateClientShipToMaster(e).then((e=>{(null===e||void 0===e?void 0:e.statusCode)===_.B.SUCCESS&&(B({}),Le(),y.W.show(null===e||void 0===e?void 0:e.message,g.a.SUCCESS))})).catch((e=>{B({}),y.W.show(e,g.a.ERROR)}))}else Ee.createClientShipToMaster(S).then((e=>{(null===e||void 0===e?void 0:e.statusCode)===_.B.CREATED&&(B({}),Le(),y.W.show(null===e||void 0===e?void 0:e.message,g.a.SUCCESS))})).catch((e=>{B({}),y.W.show(e,g.a.ERROR)}))}else y.W.show("Please Check all the Fields!",g.a.ERROR)}})})]})}):null]})},P=()=>{const e={client_name:{inputType:"multiSelect",label:"Client",options:[],value:null,validation:{required:!0},fieldWidth:"col-md-6"},group_name:{inputType:"inputtext",label:"Group Name",value:null,validation:{required:!0},fieldWidth:"col-md-6"}},[l,i]=(0,t.useState)([]),[a,o]=(0,t.useState)([]),[h,j]=(0,t.useState)(!1),[A,T]=(0,t.useState)(!1),[D,I]=(0,t.useState)(!1),[M,W]=(0,t.useState)(!0),[k,q]=(0,t.useState)(!1),[O,P]=(0,t.useState)([]),[U,B]=(0,t.useState)(),[V,H]=(0,t.useState)([]),[Y,z]=(0,t.useState)([]),[G,L]=(0,t.useState)([]),[J,Q]=(0,t.useState)([]),[Z,K]=(0,t.useState)([]),[X,$]=(0,t.useState)(""),[ee,le]=(0,t.useState)(""),[ie,te]=(0,t.useState)(!1),[ae,ne]=(0,t.useState)(!1),[oe,de]=(0,t.useState)([]),[se,ce]=(0,t.useState)([]),[re,ue]=(0,t.useState)([]),[ve,pe]=(0,t.useState)([]),[me,he]=(0,t.useState)([]),[fe,ye]=(0,t.useState)([]),[ge,_e]=(0,t.useState)({}),[xe,Ne]=(0,t.useState)(e),[be,Se]=(0,t.useState)(f().cloneDeep(xe)),je=(new N.F,new R,new w.R,new C._,(new p.A).get("userInfo")),Ae=null===je||void 0===je?void 0:je.userId;let we;const Ce=new v.m,Te=(new x.r,new b.W,new S.d),De=[{label:"Action",fieldName:"action",textAlign:"left",frozen:!0,sort:!1,filter:!1,body:e=>(0,E.jsxs)("div",{style:{display:"flex",gap:"10px",marginLeft:"20px"},children:[(0,E.jsx)("span",{className:"pi pi-pencil",style:{cursor:"pointer"},title:"Update",onClick:()=>Re(e)}),(0,E.jsx)("span",{className:"pi pi-".concat(e.isActive?"ban":"check-circle"),style:{cursor:"pointer"},title:e.isActive?"Deactivate":"Activate",onClick:()=>Oe(e)})]})},{label:"Client",fieldName:"clientName",textAlign:"left",sort:!0,filter:!0,fieldValue:"clientName",changeFilter:!0,placeholder:"Client",body:e=>(0,E.jsxs)("div",{children:[(0,E.jsx)("span",{id:"companyNameTooltip-".concat(e.id),children:e.clientName}),(0,E.jsx)(m.m,{target:"#companyNameTooltip-".concat(e.id),position:"top"})]})},{label:"Group Name",fieldName:"groupName",textAlign:"left",sort:!0,filter:!0,fieldValue:"groupName",changeFilter:!0,placeholder:"Group Name",body:e=>(0,E.jsxs)("div",{children:[(0,E.jsx)("span",{id:"companyNameTooltip-".concat(e.id),children:e.groupName}),(0,E.jsx)(m.m,{target:"#companyNameTooltip-".concat(e.id),position:"top"})]})},{label:"Status",fieldName:"isActive",textAlign:"left",frozen:!1,sort:!0,filter:!0,body:e=>(0,E.jsx)("div",{children:(0,E.jsx)("span",{style:{color:1===(null===e||void 0===e?void 0:e.isActive)?"green":"red"},children:1===(null===e||void 0===e?void 0:e.isActive)?"Active":"Inactive"})})}];(0,t.useEffect)((()=>{0==A&&0==k&&(async()=>{await Fe();const e=await We();await Ee(),await Ie(e)})()}),[A,k]);const Fe=async()=>{j(!0);try{var e;const l=await Te.getClientGroupsMaster();return null===l||void 0===l||null===(e=l.groups)||void 0===e||e.forEach((e=>{e.updated_at=e.updated_at?F()(e.updated_at).format("DD-MM-YYYY HH:mm:ss"):null})),ye(null===l||void 0===l?void 0:l.groups),null===l||void 0===l?void 0:l.groups}catch(l){console.error(l)}finally{j(!1)}},Ee=async()=>{j(!0);try{var e;const l=await Ce.getCountryMaster(),t=null===l||void 0===l||null===(e=l.countries)||void 0===e?void 0:e.filter((e=>(null===e||void 0===e?void 0:e.isactive)||(null===e||void 0===e?void 0:e.isActive)));return i(t),t}catch(l){console.error(l)}finally{j(!1)}},Ie=async function(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:ve).map((e=>null===e||void 0===e?void 0:e.client_name));xe.client_name.options=e,await Ne(xe),await Me(xe)},Me=async e=>{Se(e)},We=async()=>{j(!0);try{var e;const l=await Te.getClientMaster(),i=null===l||void 0===l||null===(e=l.clients)||void 0===e?void 0:e.filter((e=>(null===e||void 0===e?void 0:e.isactive)||(null===e||void 0===e?void 0:e.isActive)));return pe(i),i}catch(l){console.error(l)}finally{j(!1)}},Re=e=>{B(e),qe(e),T(!0),I(!0)},ke=e=>{q(!1)},qe=async e=>{try{var l;console.log("rrrrrrrrrrrrrrrr",e),xe.client_name.value=null===e||void 0===e||null===(l=e.clientName)||void 0===l?void 0:l.split(","),xe.group_name.value=null===e||void 0===e?void 0:e.groupName,Ne(f().cloneDeep(xe))}catch(i){console.log("error",i)}},Oe=e=>{we=e,P({displayToggle:!1,title:"Delete",message:"Are you sure you want to ".concat(null!==e&&void 0!==e&&e.isactive||null!==e&&void 0!==e&&e.is_active||null!==e&&void 0!==e&&e.isActive?"deactivate":"activate"," this record?"),acceptFunction:Pe,rejectFunction:ke}),q(!0)},Pe=()=>{j(!0),Te.toggleClientGroupStatus((0,d.A)((0,d.A)({},we),{},{loggedInUserId:Ae})).then((()=>{var e;j(!1),q(!1),y.W.show("Client group record ".concat(null!==(e=we)&&void 0!==e&&e.isactive?"deactivated":"activated"," successfully"),g.a.SUCCESS)})).catch((e=>(j(!1),!1)))},Ue=()=>{T(!1),I(!1),B({}),Ne(f().cloneDeep(e)),Se(f().cloneDeep(e)),_e({})};return h?(0,E.jsx)(n.a,{}):(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)("div",{style:{display:"flex",justifyContent:"end",marginBottom:"0.5em"},children:(0,E.jsx)(s.Q,{label:"Add New Client Group",icon:"pi pi-check",iconPos:"right",submitEvent:async()=>{T(!0)}})}),(0,E.jsxs)("p",{className:"m-0",children:[(0,E.jsx)(c.A,{data:fe,column:De,showGridlines:!0,resizableColumns:!0,rows:20,paginator:!0,sortable:!0,headerRequired:!0,scrollHeight:"calc(100vh - 200px)",downloadedfileName:"Client_Group"}),k?(0,E.jsx)(r.A,{actionPopupToggle:O,onCloseFunction:ke}):null]}),A?(0,E.jsx)("div",{className:"popup-overlay md-popup-overlay",children:(0,E.jsxs)("div",{className:"popup-body md-popup-body stretchLeft",children:[(0,E.jsxs)("div",{className:"popup-header ",children:[(0,E.jsxs)("div",{className:"popup-close",onClick:()=>{Ue()},children:[(0,E.jsx)("i",{className:"pi pi-angle-left"}),(0,E.jsxs)("h4",{className:"popup-heading",children:[D?"Update":"Add New"," Client Group"]})]}),(0,E.jsx)("div",{className:"popup-right-close",onClick:()=>{Ue()},children:"\xd7"})]}),(0,E.jsxs)("div",{className:"popup-content",style:{padding:"1rem 2rem"},children:[(0,E.jsx)(u.A,{form:f().cloneDeep(be),formUpdateEvent:Me,isFormValidFlag:M}),(0,E.jsx)(u.A,{form:f().cloneDeep(ge),formUpdateEvent:async e=>{_e(e)},isFormValidFlag:M})]}),(0,E.jsx)("div",{className:"popup-lower-btn",children:(0,E.jsx)(s.Q,{label:"Submit",icon:"pi pi-check",iconPos:"right",submitEvent:async e=>{e.preventDefault();let l=!0;const i=[];if(f().each(be,(e=>{var t;null!==e&&void 0!==e&&null!==(t=e.validation)&&void 0!==t&&t.required&&(i.push(e.valid),l=l&&e.valid)})),console.log("clientForm",be,l),W(l),l){var t,a,n;const e={clientId:null===be||void 0===be||null===(t=be.client_name)||void 0===t||null===(a=t.value)||void 0===a?void 0:a.map((e=>{var l;return null===ve||void 0===ve||null===(l=ve.find((l=>(null===l||void 0===l?void 0:l.client_name)===e)))||void 0===l?void 0:l.id})).filter((e=>void 0!==e&&null!==e)).join(","),groupName:null===be||void 0===be||null===(n=be.group_name)||void 0===n?void 0:n.value,updatedBy:Ae};if(null!==U&&void 0!==U&&U.id){const l=(0,d.A)((0,d.A)({},e),{},{id:null===U||void 0===U?void 0:U.id});Te.updateClientGroupMaster(l).then((e=>{(null===e||void 0===e?void 0:e.statusCode)===_.B.SUCCESS&&(B({}),Ue(),y.W.show(null===e||void 0===e?void 0:e.message,g.a.SUCCESS))})).catch((e=>{B({}),y.W.show(e,g.a.ERROR)}))}else Te.createClientGroupMaster(e).then((e=>{(null===e||void 0===e?void 0:e.statusCode)===_.B.CREATED&&(B({}),Ue(),y.W.show(null===e||void 0===e?void 0:e.message,g.a.SUCCESS))})).catch((e=>{B({}),y.W.show(e,g.a.ERROR)}))}else y.W.show("Please Check all the Fields!",g.a.ERROR)}})})]})}):null]})};const U=function(){const[e,l]=(0,t.useState)(0),[i,d]=(0,t.useState)(!1);return(0,t.useEffect)((()=>{}),[e]),i?(0,E.jsx)(n.a,{}):(0,E.jsx)(E.Fragment,{children:(0,E.jsxs)(a.J,{activeIndex:e,onTabChange:e=>{l(e.index)},className:o["main-tab-screen"],panelContainerClassName:o["panel-tabs"],children:[(0,E.jsx)(a.K,{header:"Client",children:(0,E.jsx)(I,{})}),(0,E.jsx)(a.K,{header:"Client Contact",children:(0,E.jsx)(k,{})}),(0,E.jsx)(a.K,{header:"Client Group",children:(0,E.jsx)(P,{})}),(0,E.jsx)(a.K,{header:"Client Bill To",children:(0,E.jsx)(q,{})}),(0,E.jsx)(a.K,{header:"Client Ship To",children:(0,E.jsx)(O,{})})]})})}}}]);
//# sourceMappingURL=943.83c2900e.chunk.js.map