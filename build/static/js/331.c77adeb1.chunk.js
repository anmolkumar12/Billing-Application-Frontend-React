"use strict";(self.webpackChunkBilling_Application_Frontend=self.webpackChunkBilling_Application_Frontend||[]).push([[331],{8310:(e,a,l)=>{l.d(a,{f:()=>i});var s=l(5043),n=l(2329),o=l(579);const i=e=>{let{fieldObj:a,fieldKey:l,updateValidity:i,matchObj:t}=e;const r=a.validation,[d,c]=(0,s.useState)(a.valid),[m,u]=(0,s.useState)(a.errorMessage);return(0,s.useEffect)((()=>{let e=!0,s="";r.required&&(!a.value||null===a.value||"string"===typeof a.value&&""===a.value.trim()||Array.isArray(a.value)&&!a.value.length)?(e=!1,s="This is required"):r.minlength&&a.value&&"string"===typeof a.value&&""!==a.value.trim()&&a.value.trim().length<r.minlength?(e=!1,s="Minlength is ".concat(r.minlength)):r.email&&a.value&&"string"===typeof a.value&&""!==a.value.trim()&&!a.value.trim().match("[a-zA-z_.+0-9-]+@[a-zA-Z0-9-]+([.][a-zA-Z0-9]+)+")?(e=!1,s="Invalid Email"):r.pattern&&a.value&&"string"===typeof a.value&&""!==a.value.trim()&&!a.value.trim().match(r.pattern)?(e=!1,s="Invalid Pattern"+(r.patternHint?" (Hint : ".concat(r.patternHint,")"):null)):r.maxlength&&a.value&&"string"===typeof a.value&&""!==a.value.trim()&&a.value.trim().length>r.maxlength?(e=!1,s="Maxlength is ".concat(r.maxlength)):r.min&&a.value&&"string"===typeof a.value&&""!==a.value.trim()&&a.value.trim()<r.min?(e=!1,s="Min is ".concat(r.min)):r.max&&a.value&&"string"===typeof a.value&&""!==a.value.trim()&&a.value.trim()>r.max?(e=!1,s="Max is ".concat(r.max)):r.match&&a.value&&"string"===typeof a.value&&""!==a.value.trim()&&a.value.trim()!==t.value.trim()?(e=!1,s="Match Failed"):r.maskFixedLength&&a.value&&"string"===typeof a.value&&""!==a.value.trim()&&a.value.trim().length!==r.maskFixedLength?(e=!1,s="Required length is ".concat(r.maskFixedLength)):r.maskMinLength&&a.value&&"string"===typeof a.value&&""!==a.value.trim()&&a.value.trim().length<r.maskMinLength?(e=!1,s="Minlength is ".concat(r.maskMinLength)):r.maskMaxLength&&a.value&&"string"===typeof a.value&&""!==a.value.trim()&&a.value.trim().length>r.maskMaxLength?(e=!1,s="Maxlength is ".concat(r.maskMaxLength)):a.value&&a.value.length&&"contactnumber"===a.inputType&&!(0,n.g0)(a.value)&&(e=!1,s="Invalid Phone Number"),d===e&&m===s||(c(e),u(s),i(e,l,s))})),d?null:(0,o.jsx)("div",{className:"custom-error",children:(0,o.jsx)("span",{style:{color:"red",position:"relative"},children:m})})}},9331:(e,a,l)=>{l.r(a),l.d(a,{default:()=>I});var s=l(5043);const n={"layout-left-panel":"SideNav_layout-left-panel__1Gmkt","layout-left-panel-collapsed":"SideNav_layout-left-panel-collapsed__HXktF","left-menubar":"SideNav_left-menubar__qmjbe",activeMenu:"SideNav_activeMenu__PWgBT",logo:"SideNav_logo__mG-cf","logout-btm-menu":"SideNav_logout-btm-menu__hTOT7","logout-btm-menu-collapsed":"SideNav_logout-btm-menu-collapsed__LsSU5","collapse-icon-collapsed":"SideNav_collapse-icon-collapsed__xpqoN","collapse-icon":"SideNav_collapse-icon__3KDxb"};var o=l(1112),i=l(4539),t=l(7356),r=l(1688),d=l(8992),c=l(8945),m=l(2235),u=l(5727),v=l(579);const p=e=>{let{userMenu:a}=e;const[l,t]=(0,s.useState)(!1),[d,c]=(0,s.useState)("MasterDashboard"),[m,p]=(0,s.useState)(!1),h=a,x=(0,r.W6)(),g=(new u.A).get("userRole");(0,s.useEffect)((()=>{N()}),[]);const N=()=>{const e=h.find((e=>e.link==x.location.pathname));e?c(e.moduleName):x.location.pathname===(o.i.AGGREGATOR_CLENT_INFO||o.i.AGGREGATOR_WALLET_INFO)?c("Aggregator"):x.location.pathname===o.i.AGGREGATOR_WALLETWISE_INFO&&c("Dashboard")};return(0,v.jsx)(v.Fragment,{children:(0,v.jsxs)("div",{className:m?n["layout-left-panel"]+" "+n["layout-left-panel-collapsed"]:n["layout-left-panel"],children:[(0,v.jsxs)("div",{className:n["left-menubar"],children:[(0,v.jsx)("div",{className:n.logo,children:(0,v.jsx)("img",{src:"./Polestar Logo.svg"})}),(0,v.jsx)("ul",{children:h.map(((e,a)=>{if((null===e||void 0===e?void 0:e.accessRole.filter((e=>e==g))).length&&e.systemRole==g)return(0,v.jsx)("li",{children:(0,v.jsx)("a",{href:"#",className:n[d===e.moduleName?"activeMenu":""],onClick:()=>{c(e.moduleName),x.push(e.link)},children:(0,v.jsxs)("b",{style:{display:"flex",alignItems:"center"},children:[(0,v.jsx)("span",{className:e.icon,style:{marginRight:"8px"}}),m?(0,v.jsx)(v.Fragment,{}):(0,v.jsx)(v.Fragment,{children:(0,v.jsx)("span",{children:e.name})})]})})},a)}))})]}),(0,v.jsx)("div",{className:m?n["collapse-icon"]+" "+n["collapse-icon-collapsed"]:n["collapse-icon"],onClick:()=>{p(!m),i.u.sideNavCollapse.next(!m)},children:(0,v.jsx)("i",{className:"pi pi-sort-alt"})})]})})},h={"top-navbar":"TopNavbar_top-navbar__9ZwrB","nav-page-name":"TopNavbar_nav-page-name__bVBOC","nav-profile-notification":"TopNavbar_nav-profile-notification__ybOVy","nav-notification":"TopNavbar_nav-notification__6rxVn","p-badge":"TopNavbar_p-badge__57xNx","nav-profile":"TopNavbar_nav-profile__N9GhF","profile-details":"TopNavbar_profile-details__peS+j",resetPasswordBody:"TopNavbar_resetPasswordBody__FU9VO",resetPasswordPopup:"TopNavbar_resetPasswordPopup__gn6AW","close-popup":"TopNavbar_close-popup__yPtR0","login-div":"TopNavbar_login-div__55ExY","mobile-menubar":"TopNavbar_mobile-menubar__82eJU","mobile-menu":"TopNavbar_mobile-menu__49Uky",activeMenu:"TopNavbar_activeMenu__KYQP3","notification-menu":"TopNavbar_notification-menu__Ra0nB","notification-header":"TopNavbar_notification-header__VanYG","notification-body":"TopNavbar_notification-body__5ITUW","no-notification-div":"TopNavbar_no-notification-div__HVITa","notification-footer":"TopNavbar_notification-footer__v5Xwv","notification-item":"TopNavbar_notification-item__1mq2J","noti-name":"TopNavbar_noti-name__NyW8U","noti-desp":"TopNavbar_noti-desp__fouFA","noti-close":"TopNavbar_noti-close__1BPPK","menubar-open":"TopNavbar_menubar-open__N6DiU"};var x=l(2482),g=l(9379),N=l(8564),f=l(8310);const w=()=>{const e=(0,r.W6)(),a=(new u.A).get("userInfo"),[l,n]=(0,s.useState)(!0),[p,h]=(0,s.useState)(!0),[x,w]=(0,s.useState)(!1),[_,j]=(0,s.useState)({resetForm:{oldPassword:{value:"",validation:{required:!0,minlength:2,maxlength:100},valid:!1,touched:!1,errorMessage:null},newPassword:{value:"",validation:{required:!0,minlength:2,maxlength:100},valid:!1,touched:!1,errorMessage:null},confirmNewPassword:{value:"",validation:{required:!0,minlength:2,maxlength:100},valid:!1,touched:!1,errorMessage:null}}}),b=(e,a)=>{const l=(0,g.A)({},_.resetForm);l[a].value=e.target.value,l[a].touched=!0,j({resetForm:l})},P=e=>{13==e.keyCode&&(e.preventDefault(),T())},y=(e,a,l)=>{const s=(0,g.A)({},_.resetForm);s[a].valid=e,s[a].errorMessage=l,j({resetForm:s})},T=l=>{if(null===l||void 0===l||l.preventDefault(),(()=>{var e,a,l,s,n,o,i;let t=!0;return Object.entries(_.resetForm).forEach((e=>{let[a,l]=e;l.valid||(t=t&&!1)})),null!==_&&void 0!==_&&null!==(e=_.resetForm)&&void 0!==e&&null!==(a=e.newPassword)&&void 0!==a&&null!==(l=a.value)&&void 0!==l&&l.length&&(null===_||void 0===_||null===(s=_.resetForm)||void 0===s||null===(n=s.newPassword)||void 0===n?void 0:n.value)===(null===_||void 0===_||null===(o=_.resetForm)||void 0===o||null===(i=o.confirmNewPassword)||void 0===i?void 0:i.value)?(t=!0,h(t),t):d.W.show("New and Confirm Password didn't match!",c.a.ERROR)})()){const l={};l.email=null===a||void 0===a?void 0:a.email,l.newPassword=_.resetForm.newPassword.value,l.currentPassword=_.resetForm.oldPassword.value,w(!0),i.u.changePassword(l).then((a=>{a&&(null===a||void 0===a?void 0:a.statusCode)===m.B.REQUEST_SUCCESS&&(d.W.show(a.message,c.a.SUCCESS),(0,t.B)().clearAllToken(),e.push(o.i.LOGIN),window.location.reload())})).catch((e=>{d.W.show(e,c.a.ERROR)}))}else d.W.show("Please check the fields !",c.a.ERROR)};return(0,v.jsxs)("div",{className:"resetPasswordContent",children:[(0,v.jsx)("div",{className:"brandLogo",children:(0,v.jsx)("img",{src:"./Polestar Logo.svg"})}),(0,v.jsx)("h2",{children:"Change Password"}),(0,v.jsxs)("form",{action:"",children:[(0,v.jsxs)("div",{className:"inputItem",children:[(0,v.jsx)("div",{className:"row m-0",children:(0,v.jsxs)("div",{className:"col-12 p-0",children:[(0,v.jsx)("label",{children:"Old Password"}),(0,v.jsx)(N._,{id:"oldPassword",name:"oldPassword",value:_.resetForm.oldPassword.value,placeholder:"Old Password",onChange:e=>{b(e,"oldPassword")},toggleMask:!0,readOnly:l,onFocus:()=>n(!1),onKeyDown:e=>P(e)})]})}),_.resetForm.oldPassword.touched||!p?(0,v.jsx)(f.f,{fieldObj:_.resetForm.oldPassword,fieldKey:"oldPassword",updateValidity:y}):null]}),(0,v.jsxs)("div",{className:"inputItem",children:[(0,v.jsx)("div",{className:"row m-0",children:(0,v.jsxs)("div",{className:"col-12 p-0",children:[(0,v.jsx)("label",{children:"New Password"}),(0,v.jsx)(N._,{id:"newPassword",name:"newPassword",value:_.resetForm.newPassword.value,placeholder:"New Password",onChange:e=>{b(e,"newPassword")},toggleMask:!0,readOnly:l,onFocus:()=>n(!1),onKeyDown:e=>P(e)})]})}),_.resetForm.newPassword.touched||!p?(0,v.jsx)(f.f,{fieldObj:_.resetForm.newPassword,fieldKey:"newPassword",updateValidity:y}):null]}),(0,v.jsxs)("div",{className:"inputItem",children:[(0,v.jsx)("div",{className:"row m-0",children:(0,v.jsxs)("div",{className:"col-12 p-0",children:[(0,v.jsx)("label",{children:"Confirm New Password"}),(0,v.jsx)(N._,{id:"confirmNewPassword",name:"confirmNewPassword",placeholder:"Confirm New Password",value:_.resetForm.confirmNewPassword.value,onChange:e=>{b(e,"confirmNewPassword")},readOnly:l,onFocus:()=>n(!1),onKeyDown:e=>P(e)})]})}),_.resetForm.confirmNewPassword.touched||!p?(0,v.jsx)(f.f,{fieldObj:_.resetForm.confirmNewPassword,fieldKey:"confirmNewPassword",updateValidity:y}):null]}),(0,v.jsx)("div",{className:"submitFormItem",children:(0,v.jsx)("button",{className:"btn",onClick:T,children:"Change Password"})})]})]})};var _=l(9911);const j=e=>{var a,l;let{mobileMenu:n}=e;const m=(0,r.W6)(),p=new u.A,g=p.get("userRole"),N=p.get("userInfo"),[f,j]=(0,s.useState)(!1),[b,P]=(0,s.useState)(!1),[y,T]=(0,s.useState)(!1),[C,k]=(0,s.useState)(!1),[R,F]=(0,s.useState)(""),A=n;return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)("div",{className:h["top-navbar"],children:[(0,v.jsxs)("div",{className:h["nav-page-name"],children:[(0,v.jsxs)("div",{className:h[C?"mobile-menubar menubar-open":"mobile-menubar"],onClick:()=>k(!C),children:[(0,v.jsx)("span",{}),(0,v.jsx)("span",{}),(0,v.jsx)("span",{})]}),(0,v.jsx)("div",{className:"pageName",children:(0,v.jsx)("h5",{children:(()=>{const e=m.location.pathname||(new _.W).getDefaultRoute();return e===o.i.MASTER?"Masters":e===o.i.CONTRACT?"Contract":e===o.i.CLIENT?"Client":e===o.i.INVOICE?"Invoice":e===o.i.CREDIT_NOTE?"Credit Note":""})()})})]}),(0,v.jsx)("div",{className:h["nav-profile-notification"],children:(0,v.jsxs)("div",{className:h.profileDiv,children:[(0,v.jsxs)("button",{className:h["nav-profile"]+" dropdown-toggle",onClick:()=>{j(!f),P(!1)},type:"button",id:"profileDropDown","data-bs-toggle":"dropdown","aria-expanded":"false",children:[(0,v.jsx)("img",{src:(null===i.u||void 0===i.u||null===(a=i.u.userInfo)||void 0===a||null===(l=a.value)||void 0===l?void 0:l.profilePicUrl)||x.Z.UserImg}),(0,v.jsx)("h6",{children:null===N||void 0===N?void 0:N.name})]}),(0,v.jsx)("div",{className:h["profile-details"]+" dropdown-menu","aria-labelledby":"profileDropDown",children:(0,v.jsxs)("ul",{className:"pullDown",children:[(0,v.jsxs)("li",{onClick:()=>j(!1),children:[" ",(0,v.jsxs)("div",{className:h["login-div"]+" perfect-left-row",onClick:()=>T(!0),children:[(0,v.jsx)("i",{className:"pi pi-lock"}),(0,v.jsx)("span",{children:"Change Password"})]})]}),(0,v.jsxs)("li",{onClick:()=>j(!1),children:[" ",(0,v.jsxs)("div",{className:h["login-div"]+" perfect-left-row",onClick:()=>{localStorage.clear(),(0,t.B)().clearAllToken(),i.u.userInfo.next({}),setTimeout((()=>{m.push(o.i.LOGIN),d.W.show("Logout Successfully",c.a.SUCCESS)}),500)},children:[(0,v.jsx)("i",{className:"pi pi-power-off"}),(0,v.jsx)("span",{children:"Log out"})]})]})]})})]})})]}),C?(0,v.jsx)(v.Fragment,{children:(0,v.jsx)("div",{className:h["mobile-menu"],children:(0,v.jsx)("ul",{children:A.map(((e,a)=>{var l,s;if((null===e||void 0===e?void 0:e.accessRole.filter((e=>e==g))).length&&e.systemRole==(null===i.u||void 0===i.u||null===(l=i.u.userInfo)||void 0===l||null===(s=l.value)||void 0===s?void 0:s.systemRole))return(0,v.jsx)("li",{children:(0,v.jsxs)("a",{href:"#",className:h[R===e.moduleName?"activeMenu":""],onClick:()=>{F(e.moduleName),m.push(e.link),k(!1)},children:[(0,v.jsx)("b",{children:R===e.moduleName?(0,v.jsx)("img",{src:e.selectedIcon}):(0,v.jsx)("img",{src:e.icon})}),(0,v.jsx)("span",{children:e.name})]})},a)}))})})}):null,y?(0,v.jsx)(v.Fragment,{children:(0,v.jsx)("div",{className:h.resetPasswordPopup,children:(0,v.jsxs)("div",{className:h.resetPasswordBody,children:[(0,v.jsx)("div",{className:h["close-popup"],onClick:()=>T(!1),children:(0,v.jsx)("i",{className:"pi pi-times"})}),(0,v.jsx)(w,{})]})})}):(0,v.jsx)(v.Fragment,{})]})};var b=l(2582),P=l(1936);const y=s.lazy((()=>new Promise((e=>{e()})).then((()=>Promise.all([l.e(215),l.e(810),l.e(913),l.e(300)]).then(l.bind(l,2300)))))),T=s.lazy((()=>new Promise((e=>{e()})).then((()=>Promise.all([l.e(215),l.e(810),l.e(490)]).then(l.bind(l,1490)))))),C=s.lazy((()=>new Promise((e=>{e()})).then((()=>Promise.all([l.e(215),l.e(810),l.e(913),l.e(943)]).then(l.bind(l,5943)))))),k=s.lazy((()=>new Promise((e=>{e()})).then((()=>Promise.all([l.e(215),l.e(810),l.e(611)]).then(l.bind(l,3611)))))),R=s.lazy((()=>new Promise((e=>{e()})).then((()=>Promise.all([l.e(215),l.e(810),l.e(620)]).then(l.bind(l,1620)))))),F=[{path:o.i.MASTER,component:y,exact:!0,isProtected:!0},{path:o.i.CONTRACT,component:T,exact:!0,isProtected:!0},{path:o.i.CLIENT,component:C,exact:!0,isProtected:!0},{path:o.i.INVOICE,component:k,exact:!0,isProtected:!0},{path:o.i.CREDIT_NOTE,component:R,exact:!0,isProtected:!0}],A=()=>(0,v.jsx)(b.Kd,{children:(0,v.jsxs)(r.dO,{children:[F.map(((e,a)=>e.isProtected?(0,v.jsx)(P.O,{path:e.path,component:e.component,exact:e.exact},a):null)),(0,v.jsx)(r.rd,{from:o.i.LAYOUT,to:(new _.W).getDefaultRoute()}),(0,v.jsx)(r.rd,{from:"*",to:o.i.MASTER})]})});var M=l(3910),S=l(7929);const O="BackButton_backButton__uOBAc",E=()=>{const e=(0,r.W6)(),[a,l]=(0,s.useState)(!1);return(0,s.useEffect)((()=>{window.location.href.includes("dashboard")||window.location.href.includes("home")?l(!0):l(!1)}),[window.location.href]),(0,v.jsx)(v.Fragment,{children:a?null:(0,v.jsxs)("div",{className:O,onClick:()=>{e.goBack(),window.location.href.includes("#")&&e.goBack()},children:[(0,v.jsx)(M.g,{icon:S.Eze}),(0,v.jsx)("p",{children:"Back"})]})})},I=()=>{const e=[{name:"Master",moduleName:"MasterDashboard",link:o.i.MASTER,icon:"pi pi-cog",systemRole:["Admin"],accessRole:["Admin","Manager","Viewer"]},{name:"Client",moduleName:"ClientDashboard",link:o.i.CLIENT,icon:"pi pi-cog",systemRole:["Admin"],accessRole:["Admin","Manager","Viewer"]},{name:"P.O",moduleName:"ContractDashboard",link:o.i.CONTRACT,icon:"pi pi-briefcase",systemRole:["Admin"],accessRole:["Admin","Manager","Viewer"]},{name:"Invoice",moduleName:"InvoiceDashboard",link:o.i.INVOICE,icon:"pi pi-inbox",systemRole:["Admin"],accessRole:["Admin","Manager","Viewer"]},{name:"Credit Note",moduleName:"CreditNoteDashboard",link:o.i.CREDIT_NOTE,icon:"pi pi-book",systemRole:["Admin"],accessRole:["Admin","Manager","Viewer"]}];return(0,v.jsx)(v.Fragment,{children:(0,v.jsxs)("div",{className:"layout-main",children:[(0,v.jsx)("div",{className:"side-nav-layout",children:(0,v.jsx)(p,{userMenu:e})}),(0,v.jsxs)("div",{className:"rendered-layout",children:[(0,v.jsx)(j,{mobileMenu:e}),(0,v.jsxs)("div",{className:"scrollable-layout",children:[(0,v.jsx)(A,{}),(0,v.jsx)(E,{})]})]})]})})}}}]);
//# sourceMappingURL=331.c77adeb1.chunk.js.map