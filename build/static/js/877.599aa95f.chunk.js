"use strict";(self.webpackChunkBilling_Application_Frontend=self.webpackChunkBilling_Application_Frontend||[]).push([[877],{1877:(e,o,n)=>{n.r(o),n.d(o,{default:()=>f});var s=n(5043),t=n(1688),r=n(1112),a=n(8992),i=n(8945),l=n(4539),u=n(2235),c=n(9911),d=n(7356);class h{constructor(){this.modifyUserInfo=e=>{const o=e;return o.user.role=o.user.roles.map((e=>e.role)),o},this.modifyValidateTokenData=e=>{const o=e;return o.role=e.roles.map((e=>e.role)),o}}}var p=n(579);const f=()=>{const e=(0,t.zy)().search,o=new URLSearchParams(e).get("token"),n=(0,t.W6)();if(o)try{const e=JSON.parse(o);(0,d.B)().setToken(e.accessToken)}catch(f){a.W.show("Invalid Response!","error"),n.push(r.i.LOGIN)}return(0,s.useEffect)((()=>{o?l.u.validateToken().then((e=>{if((null===e||void 0===e?void 0:e.statusCode)==u.B.REQUEST_SUCCESS){const o=(new h).modifyValidateTokenData(e.data);l.u.userInfo.next(o),l.u.currentRole.next(null===o||void 0===o?void 0:o.role[0]),n.push((new c.W).getRoute())}else n.push(r.i.LOGIN)})).catch((e=>{a.W.show("Failed to Login",i.a.ERROR),n.push(r.i.LOGIN)})):n.push(r.i.LOGIN)})),(0,p.jsx)("div",{children:"Loading..."})}}}]);
//# sourceMappingURL=877.599aa95f.chunk.js.map